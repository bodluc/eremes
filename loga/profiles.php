<?php eval(base64_decode("Ci8qIExvZ2Fob2xpYyBXZWIgQW5hbHl0aWNzIHNvZnR3YXJlICAgICAgICAgICAgIENvcHlyaWdodChjKSAyMDA1LTIwMTEgTG9nYWhvbGljIEIuVi4KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGwgcmlnaHRzIFJlc2VydmVkLgogKiBUaGlzIGNvZGUgaXMgc3ViamVjdCB0byB0aGUgTG9nYWhvbGljIGxpY2Vuc2UuIFVuYXV0aG9yaXplZCBjb3B5aW5nIGlzIHByb2hpYml0ZWQuCiAqIHN1cHBvcnRAbG9nYWhvbGljLmNvbSAgICAgICAgICAgICAgICAgICAgICAgICBodHRwOi8vd3d3LmxvZ2Fob2xpYy5jb20vTGljZW5zZS50eHQKKi8gCgokZG9udF9jbG9zZV9zZXNzaW9uID0gdHJ1ZTsKCmluY2x1ZGVfb25jZSAiY29tbW9uLmluYy5waHAiOwoKJHByb2ZpbGVzPTE7ICAvLyB0aGlzIGlzIHNvIGl0IGRvZXNuJ3QgbG9vcCBpbmNsdWRlcyBmcm9tIHRvcC5waHAKCi8vIFdoaWNoIHByb2ZpbGUgYXJlIHdlIGVkaXRpbmc/CiRjdXJwcm9maWxlbmFtZSA9IEAkX1JFUVVFU1RbImVkaXRjb25mIl07CgovLyBBcmUgd2UgZWRpdGluZyBvciBjcmVhdGluZyBhIG5ldyBvbmUKJHJlc3RvcmVEZWZhdWx0RGFzaGJvYXJkID0gQCRfUkVRVUVTVFsicmVzdG9yZWRlZmF1bHRkYXNoYm9hcmQiXTsKJHVwZGF0ZV9tZXRob2QgPSBAJF9SRVFVRVNUWyJ1cGRhdGVfbWV0aG9kIl07CiRzZXRfdXBkYXRlX3ByZWZlcmVuY2UgPSBAJF9SRVFVRVNUWyJzZXRfdXBkYXRlX3ByZWZlcmVuY2UiXTsKJGVkaXQgPSBAJF9SRVFVRVNUWyJlZGl0Il07CiRuZXcgPSBAJF9SRVFVRVNUWyJuZXciXTsKJGluc3RhbGwgPSBAJF9SRVFVRVNUWyJpbnN0YWxsIl07CiRzYXZlID0gQCRfUkVRVUVTVFsic2F2ZSJdOwokZGVsID0gQCRfUkVRVUVTVFsiZGVsIl07CiRiYWNrdXAgPSBAJF9SRVFVRVNUWyJiYWNrdXAiXTsKJHNwZWNpYWxxID0gQCRfUkVRVUVTVFsic3BlY2lhbHEiXTsKJG1vZGUgPSBAJF9SRVFVRVNUWyJtb2RlIl07CiRzZWFyY2ggPSBAYWRkc2xhc2hlcyh0cmltKCRfUkVRVUVTVFsic2VhcmNoIl0pKTsKJHNmaWVsZCA9IEAkX1JFUVVFU1RbInNmaWVsZCJdOwokdXBkYXRlX2NvdW50cmllcyA9IEAkX1JFUVVFU1RbInVwZGF0ZV9jb3VudHJpZXMiXTsKJHNldF9wcm9maWxlX3N0cnVjdHVyZV92ZXJzaW9uID0gQCRfUkVRVUVTVFsic2V0X3Byb2ZpbGVfc3RydWN0dXJlX3ZlcnNpb24iXTsgICAKU2VjdXJpdHlDaGVjayhAJF9SRVFVRVNUWyJuZXdjb25mbmFtZSJdKTsKCmlmICgkY3VycHJvZmlsZW5hbWUgJiYgJHZhbGlkVXNlclJlcXVpcmVkICYmICghJHNlc3Npb24tPmlzQWRtaW4oKSAmJiAhJHNlc3Npb24tPmNhbkFjY2Vzc1Byb2ZpbGUoJGN1cnByb2ZpbGVuYW1lKSkpIHsKCWRpZShfU09SUllfTk9fUklHSFRTLiI6ICRjdXJwcm9maWxlbmFtZSIpOwp9CgovL2VkaXQgcHJvZmlsZQovLyBMb2FkIHRoZSBwcm9maWxlIHRoYXQgd2UncmUgY3VycmVudGx5IHRyeWluZyB0byBlZGl0LgokZWRpdHByb2ZpbGUgPSBuZXcgU2l0ZVByb2ZpbGUoJGN1cnByb2ZpbGVuYW1lKTsKCmlmIChpc3NldCgkX1JFUVVFU1RbJ2NvcHlfdG8nXSkpIHsKICAgIGlmIChpc3NldCgkX1JFUVVFU1RbJ3dpdGhfZGF0YSddKSkgewogICAgICAgICRlZGl0cHJvZmlsZS0+Y29weVByb2ZpbGUoJF9SRVFVRVNUWydjb3B5X3RvJ10sdHJ1ZSk7ICAgIAogICAgfSBlbHNlIHsKICAgICAgICAkZWRpdHByb2ZpbGUtPmNvcHlQcm9maWxlKCRfUkVRVUVTVFsnY29weV90byddLGZhbHNlKTsgICAgCiAgICB9CiAgICBleGl0KCk7ICAgICAgICAKfQoKJHNhdmVkID0gIiI7CiRzYXZlZXJyb3IgPSBmYWxzZTsKCgoKaWYgKChpc3NldCgkc2F2ZSkpICYmIGlzc2V0KCRfUkVRVUVTVCkgJiYgKGlzc2V0KCRjdXJwcm9maWxlbmFtZSkgfHwgKGlzc2V0KCRfUkVRVUVTVFsibmV3Y29uZm5hbWUiXSkgJiYgaXNzZXQoJGluc3RhbGwpKSkpIHsKCQoJaWYgKCRlZGl0cHJvZmlsZS0+dHJhY2tlcm1vZGUhPUAkX1JFUVVFU1RbInRyYWNrZXJtb2RlIl0pIHsKICAgICAgICAvLyB3ZSdyZSBzd2l0Y2hpbmcgZGF0YSBjb2xlY3Rpb24gbWV0aG9kLgogICAgICAgIGlmICgkX1JFUVVFU1RbInRyYWNrZXJtb2RlIl09PTEpIHsKICAgICAgICAgICAgaWYgKCRfUkVRVUVTVFsidmlzaXRvcmlkZW50bWV0aG9kIl0hPTMpIHsKICAgICAgICAgICAgICAgICRfUkVRVUVTVFsidmlzaXRvcmlkZW50bWV0aG9kIl09MzsKICAgICAgICAgICAgICAgICRzYXZlZCAuPSAiPGJyPlZpc2l0b3IgSWRlbnRpZmljYXRpb24gbWV0aG9kIHdhcyBhdXRvbWF0aWNhbGx5IGNoYW5nZWQgdG86IENvb2tpZTxicj4iOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHNhdmVkIC49ICI8YnI+UGxlYXNlIGNoZWNrIGlmIFZpc2l0b3IgSWRlbnRpZmljYXRpb24gbWV0aG9kIG9uIHRoZSBBZHZhbmNlZCB0YWIgaXMgc3RpbGwgY29ycmVjdDxicj4iOyAgICAKICAgICAgICB9IAogICAgfQogICAgCiAgICAvLyBUaGVzZSBhcmUgYWxsIHVzZXIgZWRpdGFibGUgdmFsdWVzLiAgICAKCSRlZGl0cHJvZmlsZS0+Y29uZmRvbWFpbiA9IChpc3NldCgkX1JFUVVFU1RbImNvbmZkb21haW4iXSkpID8gJF9SRVFVRVNUWyJjb25mZG9tYWluIl0gOiAkZWRpdHByb2ZpbGUtPmNvbmZkb21haW47CgkkZWRpdHByb2ZpbGUtPmVxdWl2ZG9tYWlucyA9IChpc3NldCgkX1JFUVVFU1RbImVxdWl2ZG9tYWlucyJdKSkgPyAkX1JFUVVFU1RbImVxdWl2ZG9tYWlucyJdIDogJGVkaXRwcm9maWxlLT5lcXVpdmRvbWFpbnM7CglpZiAoZ2V0X21hZ2ljX3F1b3Rlc19ncGMoKSkgewoJCSRlZGl0cHJvZmlsZS0+ZXF1aXZkb21haW5zID0gc3RyaXBzbGFzaGVzKCRlZGl0cHJvZmlsZS0+ZXF1aXZkb21haW5zKTsKCX0KCSRlZGl0cHJvZmlsZS0+ZGVmYXVsdGZpbGUgPSAoaXNzZXQoJF9SRVFVRVNUWyJkZWZhdWx0ZmlsZSJdKSkgPyAkX1JFUVVFU1RbImRlZmF1bHRmaWxlIl0gOiAkZWRpdHByb2ZpbGUtPmRlZmF1bHRmaWxlOwoJJGVkaXRwcm9maWxlLT5zcGxpdGxvZ3MgPSAoaXNzZXQoJF9SRVFVRVNUWyJzcGxpdGxvZ3MiXSkpID8gJF9SRVFVRVNUWyJzcGxpdGxvZ3MiXSA6IDA7ICAvLyBDaGVja2JveGVzIGRvbid0IGdldCBwb3N0ZWQgaW4gSUUgaWYgdGhleSdyZSBmYWxzZS4KCSRlZGl0cHJvZmlsZS0+c3BsaXRmaWx0ZXIgPSAoaXNzZXQoJF9SRVFVRVNUWyJzcGxpdGZpbHRlciJdKSkgPyAkX1JFUVVFU1RbInNwbGl0ZmlsdGVyIl0gOiAkZWRpdHByb2ZpbGUtPnNwbGl0ZmlsdGVyOwogICAgJGVkaXRwcm9maWxlLT5zcGxpdGZpbHRlcm5lZ2F0aXZlID0gKGlzc2V0KCRfUkVRVUVTVFsic3BsaXRmaWx0ZXJuZWdhdGl2ZSJdKSkgPyAkX1JFUVVFU1RbInNwbGl0ZmlsdGVybmVnYXRpdmUiXSA6ICRlZGl0cHJvZmlsZS0+c3BsaXRmaWx0ZXJuZWdhdGl2ZTsgCgkkZWRpdHByb2ZpbGUtPnRyYWNrZXJtb2RlID0gKGlzc2V0KCRfUkVRVUVTVFsidHJhY2tlcm1vZGUiXSkpID8gJF9SRVFVRVNUWyJ0cmFja2VybW9kZSJdIDogJGVkaXRwcm9maWxlLT50cmFja2VybW9kZTsKICAgICRlZGl0cHJvZmlsZS0+c2tpcGlwcyA9IChpc3NldCgkX1JFUVVFU1RbInNraXBpcHMiXSkpID8gJF9SRVFVRVNUWyJza2lwaXBzIl0gOiAkZWRpdHByb2ZpbGUtPnNraXBpcHM7CglpZiAoZ2V0X21hZ2ljX3F1b3Rlc19ncGMoKSkgewoJCSRlZGl0cHJvZmlsZS0+c2tpcGlwcyA9IHN0cmlwc2xhc2hlcygkZWRpdHByb2ZpbGUtPnNraXBpcHMpOwoJfQoJJGVkaXRwcm9maWxlLT5za2lwZmlsZXMgPSAoaXNzZXQoJF9SRVFVRVNUWyJza2lwZmlsZXMiXSkpID8gJF9SRVFVRVNUWyJza2lwZmlsZXMiXSA6ICRlZGl0cHJvZmlsZS0+c2tpcGZpbGVzOwoJJGVkaXRwcm9maWxlLT50YXJnZXRmaWxlcyA9IChpc3NldCgkX1JFUVVFU1RbInRhcmdldGZpbGVzIl0pKSA/ICRfUkVRVUVTVFsidGFyZ2V0ZmlsZXMiXSA6ICRlZGl0cHJvZmlsZS0+dGFyZ2V0ZmlsZXM7CgkkZWRpdHByb2ZpbGUtPnVzZXBhZ2VjYWNoZSA9IChpc3NldCgkX1JFUVVFU1RbImNhY2hpbmciXSkpID8gJF9SRVFVRVNUWyJjYWNoaW5nIl0gOiAkZWRpdHByb2ZpbGUtPnRhcmdldGZpbGVzOwoJJGVkaXRwcm9maWxlLT5hbmltYXRlID0gKGlzc2V0KCRfUkVRVUVTVFsiYW5pbWF0ZSJdKSkgPyAkX1JFUVVFU1RbImFuaW1hdGUiXSA6ICRlZGl0cHJvZmlsZS0+YW5pbWF0ZTsKICAgICRlZGl0cHJvZmlsZS0+dGltZXpvbmVjb3JyZWN0aW9uID0gKGlzc2V0KCRfUkVRVUVTVFsidGltZXpvbmVjb3JyZWN0aW9uIl0pKSA/ICRfUkVRVUVTVFsidGltZXpvbmVjb3JyZWN0aW9uIl0gOiAkZWRpdHByb2ZpbGUtPnRpbWV6b25lY29ycmVjdGlvbjsKICAgICRlZGl0cHJvZmlsZS0+dGltZXpvbmUgPSAoaXNzZXQoJF9SRVFVRVNUWyJ0aW1lem9uZSJdKSkgPyAkX1JFUVVFU1RbInRpbWV6b25lIl0gOiAkZWRpdHByb2ZpbGUtPnRpbWV6b25lOwogICAgJG5ld3Zpc2l0b3JpZGVudG1ldGhvZCA9IChpc3NldCgkX1JFUVVFU1RbInZpc2l0b3JpZGVudG1ldGhvZCJdKSkgPyAkX1JFUVVFU1RbInZpc2l0b3JpZGVudG1ldGhvZCJdIDogJGVkaXRwcm9maWxlLT52aXNpdG9yaWRlbnRtZXRob2Q7CiAgICAkdmlzaXRvcmlkZW50bWV0aG9kc3dpdGNoZWQgPSAoJGVkaXRwcm9maWxlLT52aXNpdG9yaWRlbnRtZXRob2QgIT0gJG5ld3Zpc2l0b3JpZGVudG1ldGhvZCk7CiAgICAkZWRpdHByb2ZpbGUtPnZpc2l0b3JpZGVudG1ldGhvZCA9ICRuZXd2aXNpdG9yaWRlbnRtZXRob2Q7CiAgICAkZWRpdHByb2ZpbGUtPnJlY3Vyc2l2ZSA9IChpc3NldCgkX1JFUVVFU1RbInJlY3Vyc2l2ZSJdKSkgPyAkX1JFUVVFU1RbInJlY3Vyc2l2ZSJdIDogMDsgICAgCiAgICAkZWRpdHByb2ZpbGUtPmZ0cHNlcnZlciA9IChpc3NldCgkX1JFUVVFU1RbImZ0cHNlcnZlciJdKSkgPyAkX1JFUVVFU1RbImZ0cHNlcnZlciJdIDogJGVkaXRwcm9maWxlLT5mdHBzZXJ2ZXI7CiAgICAkZWRpdHByb2ZpbGUtPmZ0cHVzZXIgPSAoaXNzZXQoJF9SRVFVRVNUWyJmdHB1c2VyIl0pKSA/ICRfUkVRVUVTVFsiZnRwdXNlciJdIDogJGVkaXRwcm9maWxlLT5mdHB1c2VyOwogICAgJGVkaXRwcm9maWxlLT5mdHBwYXNzd2QgPSAoaXNzZXQoJF9SRVFVRVNUWyJmdHBwYXNzd2QiXSkpID8gJF9SRVFVRVNUWyJmdHBwYXNzd2QiXSA6ICRlZGl0cHJvZmlsZS0+ZnRwcGFzc3dkOwogICAgJGVkaXRwcm9maWxlLT5mdHBmdWxscGF0aCA9IChpc3NldCgkX1JFUVVFU1RbImZ0cGZ1bGxwYXRoIl0pKSA/ICRfUkVRVUVTVFsiZnRwZnVsbHBhdGgiXSA6ICRlZGl0cHJvZmlsZS0+ZnRwZnVsbHBhdGg7CiAgICAkZWRpdHByb2ZpbGUtPnZpc2l0dGltZW91dCA9IChpc3NldCgkX1JFUVVFU1RbInZpc2l0dGltZW91dCJdKSkgPyAkX1JFUVVFU1RbInZpc2l0dGltZW91dCJdIDogJGVkaXRwcm9maWxlLT52aXNpdHRpbWVvdXQ7CiAgICAkZWRpdHByb2ZpbGUtPnVybHBhcmFtZmlsdGVyID0gKGlzc2V0KCRfUkVRVUVTVFsidXJscGFyYW1maWx0ZXIiXSkpID8gJF9SRVFVRVNUWyJ1cmxwYXJhbWZpbHRlciJdIDogJGVkaXRwcm9maWxlLT51cmxwYXJhbWZpbHRlcjsKICAgICRlZGl0cHJvZmlsZS0+dXJscGFyYW1maWx0ZXJtb2RlID0gKGlzc2V0KCRfUkVRVUVTVFsidXJscGFyYW1maWx0ZXJtb2RlIl0pKSA/ICRfUkVRVUVTVFsidXJscGFyYW1maWx0ZXJtb2RlIl0gOiAkZWRpdHByb2ZpbGUtPnVybHBhcmFtZmlsdGVybW9kZTsKICAgICRlZGl0cHJvZmlsZS0+Z29vZ2xlcGFyYW1zID0gKGlzc2V0KCRfUkVRVUVTVFsiZ29vZ2xlcGFyYW1zIl0pKSA/ICRfUkVRVUVTVFsiZ29vZ2xlcGFyYW1zIl0gOiAkZWRpdHByb2ZpbGUtPmdvb2dsZXBhcmFtczsKICAgICRlZGl0cHJvZmlsZS0+ZmVlZHVybCA9IChpc3NldCgkX1JFUVVFU1RbImZlZWR1cmwiXSkpID8gJF9SRVFVRVNUWyJmZWVkdXJsIl0gOiAkZWRpdHByb2ZpbGUtPmZlZWR1cmw7CiAgICAkZWRpdHByb2ZpbGUtPmZlZWRidXJuZXJ1cmkgPSAoaXNzZXQoJF9SRVFVRVNUWyJmZWVkYnVybmVydXJpIl0pKSA/ICRfUkVRVUVTVFsiZmVlZGJ1cm5lcnVyaSJdIDogJGVkaXRwcm9maWxlLT5mZWVkYnVybmVydXJpOyAKCQoJLy8gY2hlY2sgZ2xvYmFsIGN1c3RvbSBkYXRlIGFuZCBwcm9maWxlIGN1c3RvbSBkYXRlLgoJJGZvcm1hdCA9IGFycmF5KAoJCSJmb3JtYXQxIiA9PiAibSIsCgkJInNlcGVyYXRvcjEiID0+ICItIiwKCQkiZm9ybWF0MiIgPT4gImQiLAoJCSJzZXBlcmF0b3IyIiA9PiAiLSIsCgkJImZvcm1hdDMiID0+ICJZIiwKCQkic2VwZXJhdG9yMyIgPT4gIiAiLAoJCSJmb3JtYXQ0IiA9PiAiIgkJCQkKCSk7CgkkZm9ybWF0ID0gc2VyaWFsaXplKCRmb3JtYXQpOwoJJGRhdGVfZm9ybWF0ID0gZ2V0R2xvYmFsU2V0dGluZygicHJvZmlsZURhdGVGb3JtYXQiLCRmb3JtYXQpOwoJJGRhdGVfZm9ybWF0ID0gdW5zZXJpYWxpemUoJGRhdGVfZm9ybWF0KTsKCWlmKGlzc2V0KCRfUkVRVUVTVFsiZm9ybWF0MSJdKSl7CgkJJGVkaXRwcm9maWxlLT5kYXRlRm9ybWF0ID0gYXJyYXkoCgkJCSJmb3JtYXQxIiA9PiAkX1JFUVVFU1RbImZvcm1hdDEiXSwKCQkJInNlcGVyYXRvcjEiID0+ICRfUkVRVUVTVFsic2VwZXJhdG9yMSJdLAoJCQkiZm9ybWF0MiIgPT4gJF9SRVFVRVNUWyJmb3JtYXQyIl0sCgkJCSJzZXBlcmF0b3IyIiA9PiAkX1JFUVVFU1RbInNlcGVyYXRvcjIiXSwKCQkJImZvcm1hdDMiID0+ICRfUkVRVUVTVFsiZm9ybWF0MyJdLAoJCQkic2VwZXJhdG9yMyIgPT4gJF9SRVFVRVNUWyJzZXBlcmF0b3IzIl0sCgkJCSJmb3JtYXQ0IiA9PiAkX1JFUVVFU1RbImZvcm1hdDQiXQkKCQkpOwoJCWlmKCRlZGl0cHJvZmlsZS0+ZGF0ZUZvcm1hdCA9PSAkZGF0ZV9mb3JtYXQpewoJCQlkZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLCAkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLiIucHJvZmlsZURhdGVGb3JtYXQiKTsKCQl9IGVsc2UgewoJCQkkc2F2ZSA9IHNlcmlhbGl6ZSgkZWRpdHByb2ZpbGUtPmRhdGVGb3JtYXQpOwoJCQlzZXRQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLCAkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLiIucHJvZmlsZURhdGVGb3JtYXQiLCRzYXZlKTsKCQl9Cgl9IGVsc2UgewoJCSRlZGl0cHJvZmlsZS0+ZGF0ZUZvcm1hdCA9ICRlZGl0cHJvZmlsZS0+ZGF0ZUZvcm1hdDsKCQkKCX0KCQoJJGVkaXRwcm9maWxlLT5mYWNlYm9va2xvZ2luID0gKGlzc2V0KCRfUkVRVUVTVFsiZmFjZWJvb2tsb2dpbiJdKSkgPyAkX1JFUVVFU1RbImZhY2Vib29rbG9naW4iXSA6ICRlZGl0cHJvZmlsZS0+ZmFjZWJvb2tsb2dpbjsKCQoJJGVkaXRwcm9maWxlLT5sb2dwYXJzZXJ0eXBlID0gKGlzc2V0KCRfUkVRVUVTVFsibG9nX3BhcnNlcl90eXBlIl0pKSA/ICRfUkVRVUVTVFsibG9nX3BhcnNlcl90eXBlIl0gOiAkZWRpdHByb2ZpbGUtPmxvZ3BhcnNlcnR5cGU7CiAgICAkZWRpdHByb2ZpbGUtPmluY2x1ZGViYWNrdXAgPSAoaXNzZXQoJF9SRVFVRVNUWyJpbmNsdWRlYmFja3VwIl0pKSA/ICRfUkVRVUVTVFsiaW5jbHVkZWJhY2t1cCJdIDogJGVkaXRwcm9maWxlLT5pbmNsdWRlYmFja3VwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCgkvLyBJZiB3ZSBoYXZlIHByb3BlciBzZWN1cml0eSByaWdodHMsIGVkaXQgdGhlc2UgY29yZSB2YWx1ZXMuCglpZiAoISR2YWxpZFVzZXJSZXF1aXJlZCB8fCAkc2Vzc2lvbi0+Y2FuQWRkUHJvZmlsZXMoKSkgIHsKCQlpZiAoZ2V0X21hZ2ljX3F1b3Rlc19ncGMoKSkgewoJCQkvLyBXZSdyZSBnb25uYSBoYXZlIHNvbWUgc2xhc2hlcyEKCQkJaWYgKGlzc2V0KCRfUkVRVUVTVFsibG9nZmlsZWZ1bGxwYXRoIl0pKSB7JF9SRVFVRVNUWyJsb2dmaWxlZnVsbHBhdGgiXSA9IHN0cmlwc2xhc2hlcygkX1JFUVVFU1RbImxvZ2ZpbGVmdWxscGF0aCJdKTsgfQoJCX0KCQkKCQkkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lID0gKGlzc2V0KCRfUkVRVUVTVFsibmV3Y29uZm5hbWUiXSkpID8gJF9SRVFVRVNUWyJuZXdjb25mbmFtZSJdIDogJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZTsKCQkkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZSA9IChpc3NldCgkX1JFUVVFU1RbInRhYmxlbmFtZSJdKSkgPyAkX1JFUVVFU1RbInRhYmxlbmFtZSJdIDogJGVkaXRwcm9maWxlLT50YWJsZW5hbWU7CgkJJGVkaXRwcm9maWxlLT5sb2dmaWxlZnVsbHBhdGggPSAoaXNzZXQoJF9SRVFVRVNUWyJsb2dmaWxlZnVsbHBhdGgiXSkpID8gc3RyX3JlcGxhY2UoIlxcIiwgJy8nLCAkX1JFUVVFU1RbImxvZ2ZpbGVmdWxscGF0aCJdKSA6ICRlZGl0cHJvZmlsZS0+bG9nZmlsZWZ1bGxwYXRoOwoJfQoJCgkvLyBDaGVjayBhbmQgc2VlIGlmIHZhcmlhYmxlcyBhcmUgY29ycmVjdGx5IHNldCB0byBzYXZlLi4uCgkkY2Fuc2F2ZSA9IHRydWU7CQoJaWYgKCEkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lKSB7CgkJJHNhdmVkIC49ICI8Zm9udCBjb2xvcj1cInJlZFwiPiIuX05PX1BST0ZJTEVfTkFNRV9FTlRFUkVELiI8L2ZvbnQ+PGJyPiI7CgkJJGNhbnNhdmUgPSBmYWxzZTsKCQkkc2F2ZWVycm9yID0gdHJ1ZTsKCQkkZWRpdD0xOwoJfQoKCQogICAgaWYgKCEkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZSAmJiAkY29uZiE9Im5ld2NuZiIpIHsKCQkkc2F2ZWQgLj0gIjxmb250IGNvbG9yPVwicmVkXCI+Ii5fTk9fTVlTUUxfVEFCTEVfRU5URVJFRC4iPC9mb250Pjxicj4iOwoJCSRjYW5zYXZlID0gZmFsc2U7CgkJJHNhdmVlcnJvciA9IHRydWU7CgkJJGVkaXQ9MTsKCX0KICAgIAogICAgCglpZiAoJGNvbmY9PSJuZXdjbmYiIHx8ICRuZXc9PTEpIHsKCQkkY2hlY2tsaW1pdHMgPSAiU2VsZWN0IHByb2ZpbGVuYW1lIGZyb20gIi5UQkxfUFJPRklMRVM7CgkJJGNoZWNrbGltaXRzcmVzdWx0ID0gJGRiLT5FeGVjdXRlKCRjaGVja2xpbWl0cykgb3IgZGllKF9DT1VMRE5UX1FVRVJZX1BST0ZJTEVTLiIuICIgLiAkZGItPkVycm9yTXNnKCkpOwoJCWlmIChkZWZpbmVkKCJfTElNSVRfUFJPRklMRVMiKSAhPSAwKSB7CgkJCSAgaWYgKCRjaGVja2xpbWl0c3Jlc3VsdC0+UmVjb3JkQ291bnQoKSA+IF9MSU1JVF9QUk9GSUxFUykgewoJCQkJICAkc2F2ZWQgLj0gIjxmb250IGNvbG9yPVwicmVkXCI+Ii5fVE9PX01BTllfUFJPRklMRVMuIjwvZm9udD48YnI+IjsKCQkJCSAgJGNhbnNhdmUgPSBmYWxzZTsKCQkJCSAgJHNhdmVlcnJvciA9IHRydWU7CgkJCQkgICRlZGl0PTE7ICAgICAgICAgICAgCgkJCSAgfQoJCX0KCX0JCQoJCglpZiAoZGVmaW5lZCgiX0VOQUJMRV9JTVBPUlRBTlRfUEFSQU1FVEVSX0VESVRPUl8iKSkgewogIAkkaW1wb3J0YW50X3BhcmFtX2NvdW50ID0gJF9SRVFVRVNUWyJpbXBvcnRhbnRwYXJhbXBhZ2Vjb3VudCJdOwogIAlmb3IgKCRwYXJhbV9sb29wID0gMDsgJHBhcmFtX2xvb3AgPCAkaW1wb3J0YW50X3BhcmFtX2NvdW50OyAkcGFyYW1fbG9vcCArKykgewogIAkJdW5zZXQoJHRoaXNwYXJhbSk7CiAgCQkkdGhpc3BhcmFtID0gZmFsc2U7CiAgCQlpZiAoKCRfUkVRVUVTVFsicGFyYW1pZF8iLiRwYXJhbV9sb29wXSkgJiYgKCRwYXJhbV9sb29wIDwgJGVkaXRwcm9maWxlLT5nZXRVcmxQYXJhbUNvdW50KCkpKSB7CiAgCQkJLy8gSXQncyBhbiBleGlzdGluZyBvbmUuCiAgCQkJJHRoaXNwYXJhbSA9JiAkZWRpdHByb2ZpbGUtPmdldFVybFBhcmFtQnlJbmRleCgkcGFyYW1fbG9vcCk7CiAgCQkJJHRoaXNwYXJhbVsicGFyYW1pZCJdID0gJF9SRVFVRVNUWyJwYXJhbWlkXyIuJHBhcmFtX2xvb3BdOwogIAkJfSBlbHNlIHsKICAJCQlpZiAoJF9SRVFVRVNUWyJwYXJhbXVybF8iLiRwYXJhbV9sb29wXSA+ICIiKSB7CiAgCQkJCSR0aGlzcGFyYW0gPSYgJGVkaXRwcm9maWxlLT5nZXRVcmxQYXJhbU5ldygpOwogIAkJCX0KICAJCX0KICAJCWlmICgkdGhpc3BhcmFtKSB7CiAgCQkJJHRoaXNwYXJhbVsiZmlsZW5hbWUiXSA9ICRfUkVRVUVTVFsicGFyYW11cmxfIi4kcGFyYW1fbG9vcF07CiAgCQkJJHRoaXNwYXJhbVsiaW1wb3J0YW50cGFyYW1zIl0gPSAkX1JFUVVFU1RbInBhcmFtbmFtZXNfIi4kcGFyYW1fbG9vcF07CiAgCQl9CiAgCX0KICAJCiAgCSRpbXBvcnRhbnRfcGFyYW1fY291bnQgPSAkX1JFUVVFU1RbImltcG9ydGFudHBhcmFtcGFnZWNvdW50Il07CiAgCWZvciAoJHBhcmFtX2xvb3AgPSAwOyAkcGFyYW1fbG9vcCA8ICRpbXBvcnRhbnRfcGFyYW1fY291bnQ7ICRwYXJhbV9sb29wICsrKSB7CiAgCQlpZiAoQCRfUkVRVUVTVFsiRGVsZXRlUGFyYW1fIiAuICRwYXJhbV9sb29wXSkgewogIAkJCSRlZGl0cHJvZmlsZS0+ZGVsZXRlVXJsUGFyYW1zKCRwYXJhbV9sb29wKTsKICAJCX0KICAJfQogIH0JCglpZiAoJGNhbnNhdmUpIHsKCgkJJGVkaXRwcm9maWxlLT5kaWVvbnNxbGVycm9yID0gZmFsc2U7CgkJJGVkaXRwcm9maWxlLT5TYXZlKCk7CiAgICAgICAgaWYgKCR2YWxpZFVzZXJSZXF1aXJlZCkgewogICAgICAgIGlmICgkc2Vzc2lvbi0+Y2FuQWRkUHJvZmlsZXMoKSAmJiAhJHNlc3Npb24tPmlzQWRtaW4oKSkgewogICAgICAgICAgICAvL2VjaG8gIkFkZGluZyBwcm9maWxlIHRvIHVzZXIgYWNjb3VudCI7CiAgICAgICAgICAgIC8vIGlmIHRoZSB1c2VyIGNhbiBhZGQgcHJvZmlsZXMsIGhlIHNob3VsZCBiZSB0aGUgZGVmYXVsdCBtYW5hZ2VyIGFzIHdlbGwKICAgICAgICAgICAgJHNlc3Npb24tPnVzZXJfcHJvZmlsZXNbY291bnQoJHNlc3Npb24tPnVzZXJfcHJvZmlsZXMpXT0kZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lOwogICAgICAgICAgICAkZGItPkV4ZWN1dGUoIlVQREFURSAiLlRCTF9VU0VSUy4iIFNFVCBQUk9GSUxFUz1jb25jYXQoUFJPRklMRVMsJywkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lJykgV0hFUkUgdXNlcm5hbWUgPSAnJHNlc3Npb24tPnVzZXJuYW1lJyAiKTsKICAgICAgICAgICAgLy9lY2hvICJVUERBVEUgX2xvZ2Fob2xpY191c2VycyBTRVQgUFJPRklMRVM9Y29uY2F0KFBST0ZJTEVTLCcsJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZScpIFdIRVJFIHVzZXJuYW1lID0gJyRzZXNzaW9uLT51c2VybmFtZScgIjsKICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICB9CgkJLyogd2UgZG9uJ3QgZG8gdGhpcyBhbnltb3JlICovCiAgICAgICAgLyoKCQlpZiAoJGVkaXRwcm9maWxlLT50cmFja2VybW9kZT09MSkgewogICAgICAgICAgICAkdHJlYWxfcGF0aCA9IHJlYWxwYXRoKCJpbmRleC5waHAiKTsKICAgICAgICAgICAgJHRwYXRoID0gZGlybmFtZSgkdHJlYWxfcGF0aCk7CiAgICAgICAgICAgICR0cmFja2VyX2xvZ2ZpbGU9JHRwYXRoLiIvZmlsZXMvIi4kZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLiIubG9nIjsKICAgICAgICAgICAgJHRoYW5kbGUgPSBmb3BlbiAoJHRyYWNrZXJfbG9nZmlsZSwgImEiKTsKICAgICAgICAgICAgLy9md3JpdGUoJHRoYW5kbGUsIiMgTG9nZmlsZSBjcmVhdGVkIGJ5IExvZ2Fob2xpYyBXZWIgQW5hbHl0aWNzIC0gd3d3LmxvZ2Fob2xpYy5jb21cbiIpOwogICAgICAgICAgICBmY2xvc2UoJHRoYW5kbGUpOwogICAgICAgICAgICBAY2htb2QoJHRyYWNrZXJfbG9nZmlsZSwgMDY2Nik7CiAgICAgICAgfQogICAgICAgICovCiAgICAgICAgCiAgICBpZiAoJGVkaXRwcm9maWxlLT5sYXN0c3FsZXJyb3IpIHsKCQkJJHNhdmVkIC49ICI8Zm9udCBjb2xvcj1cInJlZFwiPiIuJGVkaXRwcm9maWxlLT5sYXN0c3FsZXJyb3IuIjwvZm9udD48YnI+IjsKCQkJJGVkaXQ9MTsKCQkJJHNhdmVlcnJvciA9IHRydWU7CgkJfSBlbHNlIHsKCQkJJHNhdmVkIC49IF9QUk9GSUxFX0NPTkZfU0FWRUQuIi48YnI+IjsKCQkJdW5zZXQoJGVkaXQpOwoJCQl1bnNldCgkbmV3KTsKCQl9CgkJaWYgKCR2aXNpdG9yaWRlbnRtZXRob2Rzd2l0Y2hlZCkgewoJCQkvLyBXZSBuZWVkIHRvIHJlY2FsY3VsYXRlIHRoZSBjdXJyZW50IHZpc2l0b3IgaWRlbnRpZmljYXRpb24gbWV0aG9kLgoJCX0KCX0KfQoKCmlmIChpc3NldCgkaW5zdGFsbCkgJiYgKCRpbnN0YWxsPT0xKSAmJiAoISRzYXZlZXJyb3IpKSB7CiAgICBpZiAoJHEgPSBAJGRiLT5FeGVjdXRlKCJzZWxlY3QgKiBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lIGxpbWl0IDEiKSkgewogICAgICAgICRjaGs9JHEtPkZldGNoUm93KCk7CiAgICAgICAgLy8kc2F2ZWQ9JHNhdmVkLiJNeXNxbCBUYWJsZSA8Yj4kZWRpdHByb2ZpbGUtPnRhYmxlbmFtZTwvYj4gYWxyZWFkeSBleGlzdHMsIHNraXBwaW5nIENSRUFURS48YnI+IjsKICAgIH0gZWxzZSB7CiAgICAgICAgY3JlYXRlRGF0YVRhYmxlKCRlZGl0cHJvZmlsZSk7CiAgICAgICAgJHNhdmVkPSRzYXZlZC4iQ3JlYXRlZCB0YWJsZXMgZm9yIDxiPiRlZGl0cHJvZmlsZS0+dGFibGVuYW1lPC9iPiBpbiBkYXRhYmFzZSA8Yj4kRGF0YWJhc2VOYW1lPC9iPjxicj4iOyAvL0hFTFAhCiAgICB9CiAgICAKICAgICRzdGVwPTU7CiAgICAkY29uZj0kZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lOwogICAgaGVhZGVyKCJsb2NhdGlvbjogaW5zdGFsbC5waHA/c3RlcD01JmNvbmY9Ii51cmxlbmNvZGUoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSkuIiZzYXZlZD0iLnVybGVuY29kZSgkc2F2ZWQpKTsKICAgIGV4aXQoKTsKfQoKaWYgKCRiYWNrdXAgPT0gMikgewoJLy8gRXhwb3J0IHRoZSAuZ3ppcHBlZCBiYWNrdXAgZmlsZS4KICAgIHNldF90aW1lX2xpbWl0KDg2NDAwKTsKICAgIGlmIChpc3NldCgkX1JFUVVFU1RbJ2RheXNfaW5fZmlsZSddKSkgewoJCSRkYXlzX2luX2ZpbGUgPSAkX1JFUVVFU1RbJ2RheXNfaW5fZmlsZSddOwoJfSBlbHNlIHsKCQkkZGF5c19pbl9maWxlID0gMTsKCX0KICAgICRyZWFsX3BhdGggPSByZWFscGF0aCgiaW5kZXgucGhwIik7CiAgICAkcGF0aCA9IGRpcm5hbWUoJHJlYWxfcGF0aCk7CiAgICAkcGF0aCA9IHN0cl9yZXBsYWNlICgiXFwiLCAiLyIsICRwYXRoKTsKICAgIAogICAgJG5kYXlzID0gcm91bmQoKCR0by0gJGZyb20pLyg4NjQwMCokZGF5c19pbl9maWxlKSk7CgkkaT0wOwoJJGZpbmFsdG89JHRvOwoJJHRvPSRmcm9tOwoJb2Jfc3RhcnQoKTsKCXdoaWxlICgkaSA8ICRuZGF5cykgewoJCSRmcm9tID0gJHRvOwoJCSR0bz0kZnJvbSsoODY0MDAqJGRheXNfaW5fZmlsZSk7CgkJaWYgKEAkdXBncmFkZSE9InRydWUiKSB7CgkJCS8vICRxPSRkYi0+RXhlY3V0ZSgic2VsZWN0IHRpbWVzdGFtcCwgdi5pcG51bWJlciBhcyBpcG51bWJlcix1LnVybCBhcyB1cmwsdXAucGFyYW1zIGFzIHBhcmFtcyxzdGF0dXMsYnl0ZXMsci5yZWZlcnJlciBhcyByZWZlcnJlcixycC5wYXJhbXMgYXMgcmVmcGFyYW1zLCBBR0VOVFMubmFtZSB1c2VyYWdlbnQgZnJvbQoJCQkvLyAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZSBhcyBhLCAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV92aXNpdG9yaWRzIGFzIHYsICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3VybHMgYXMgdSwkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV91cmxwYXJhbXMgYXMgdXAsICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3JlZmVycmVycyBhcyByLCAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV9yZWZwYXJhbXMgYXMgcnAsICIuVEJMX1VTRVJfQUdFTlRTLiIgYXMgQUdFTlRTIHdoZXJlIHRpbWVzdGFtcCA+PSAkZnJvbSBhbmQgdGltZXN0YW1wIDw9ICR0byBhbmQgKGEudmlzaXRvcmlkPXYuaWQgYW5kIGEudXJsPXUuaWQgYW5kIGEucGFyYW1zPXVwLmlkIGFuZCBhLnJlZmVycmVyPXIuaWQgYW5kIGEucmVmcGFyYW1zPXJwLmlkIGFuZCBhLnVzZXJhZ2VudGlkID0gQUdFTlRTLmlkKSBvcmRlciBieSB0aW1lc3RhbXAiKTsKCQkJJHEgPSAkZGItPkV4ZWN1dGUoIlNFTEVDVCBhLnRpbWVzdGFtcCwgdi5pcG51bWJlciBBUyBpcG51bWJlciwgdS51cmwgQVMgdXJsLCB1cC5wYXJhbXMgQVMgcGFyYW1zLCBhLnN0YXR1cywgYS5ieXRlcywgci5yZWZlcnJlciBBUyByZWZlcnJlciwgcnAucGFyYW1zIEFTIHJlZnBhcmFtcywgYi51c2VyYWdlbnQgQVMgdXNlcmFnZW50IEZST00KCQkJeyRlZGl0cHJvZmlsZS0+dGFibGVuYW1lfSBhcyBhLCB7JGVkaXRwcm9maWxlLT50YWJsZW5hbWVfdmlzaXRvcmlkc30gQVMgdiwgeyRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3VybHN9IEFTIHUsIHskZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV91cmxwYXJhbXN9IEFTIHVwLCB7JGVkaXRwcm9maWxlLT50YWJsZW5hbWVfcmVmZXJyZXJzfSBBUyByLCB7JGVkaXRwcm9maWxlLT50YWJsZW5hbWVfcmVmcGFyYW1zfSBBUyBycCwgeyRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3VzZXJhZ2VudHN9IEFTIGIgV0hFUkUgYS50aW1lc3RhbXAgPj0geyRmcm9tfSBhbmQgYS50aW1lc3RhbXAgPD0geyR0b30gQU5EIChhLnZpc2l0b3JpZCA9IHYuaWQgQU5EIGEudXJsID0gdS5pZCBBTkQgYS5wYXJhbXMgPSB1cC5pZCBBTkQgYS5yZWZlcnJlciA9IHIuaWQgQU5EIGEucmVmcGFyYW1zID0gcnAuaWQgQU5EIGEudXNlcmFnZW50aWQgPSBiLmlkKSBPUkRFUiBCWSBhLnRpbWVzdGFtcCIpOwoJCQkKCQkJaWYgKCRtb2RlPT0iY3N2IikgewoJCQkJJGJ1cGZpbGU9JHBhdGggLiAiL2ZpbGVzLyRjdXJwcm9maWxlbmFtZS4iLiBkYXRlKCJZbWQiLCRmcm9tKSAuIGRhdGUoIi1ZbWQiLCR0bykgLiAiLmNzdi5neiI7CgkJCX0gZWxzZSB7CgkJCQkkYnVwZmlsZT0kcGF0aCAuICIvZmlsZXMvJGN1cnByb2ZpbGVuYW1lLiIuIGRhdGUoIlltZCIsJGZyb20pIC4gZGF0ZSgiLVltZCIsJHRvKSAuICIubG9nLmd6IjsKCQkJfQoJCX0gZWxzZSB7CgkJCS8vICRxPSRkYi0+RXhlY3V0ZSgic2VsZWN0ICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lLiosIEFHRU5UUy5uYW1lIHVzZXJhZ2VudCBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lIGxlZnQgb3V0ZXIgam9pbiAiLlRCTF9VU0VSX0FHRU5UUy4iIEFHRU5UUyBvbiAodXNlcmFnZW50aWQgPSBBR0VOVFMuaWQpIG9yZGVyIGJ5IHRpbWVzdGFtcCIpOwoJCQkkcSA9ICRkYi0+RXhlY3V0ZSgiU0VMRUNUIHskZWRpdHByb2ZpbGUtPnRhYmxlbmFtZX0uKiwgYi51c2VyYWdlbnQgQVMgdXNlcmFnZW50IEZST00geyRlZGl0cHJvZmlsZS0+dGFibGVuYW1lfSBBUyBhLCB7JGVkaXRwcm9maWxlLT50YWJsZW5hbWVfdXNlcmFnZW50fSBBUyBiIE9OIChhLnVzZXJhZ2VudGlkID0gYi5pZCkgT1JERVIgQlkgdGltZXN0YW1wIik7CQkJCgkJCSRidXBmaWxlPSRwYXRoIC4gIi9maWxlcy8kY3VycHJvZmlsZW5hbWUuYmFja3VwLmxvZy5neiI7ICAKCQl9ICAgCgkJIAoJCQoJCS8vJGdmaWxlPWV4ZWMoInB3ZCIpIC4gIi9maWxlcy9nbG9iYWwucGhwIjsKCQkkZnAgPSBnem9wZW4gKCRidXBmaWxlLCJ3Iik7CgkJaWYgKCRtb2RlPT0iY3N2IikgewoJCQkvLyB3cml0ZSBhIGhlYWRyZSByb3cKCQkJJGJ1ZmZlcj0gIlwiSVAgbnVtYmVyXCIsXCJEYXRlXCIsXCJVUkxcIixcIlN0YXR1c1wiLFwiQnl0ZXNcIixcIlJlZmVycmVyXCIsXCJVc2VyYWdlbnRcIlxuIjsgLy9IRUxQIQoJCQkvL2VjaG8gJGJ1ZmZlcjsKCQkJZ3p3cml0ZSAoJGZwLCAkYnVmZmVyKTsKCQl9CgkJd2hpbGUgKCRkYXRhPSRxLT5GZXRjaFJvdygpKSB7CgkJCWlmICgkZGF0YVsicmVmcGFyYW1zIl09PSI/IikgewoJCQkJJGRhdGFbInJlZnBhcmFtcyJdPSIiOwoJCQl9CgkJCSRkYXRlPWRhdGUoIltkL00vWTpIOmk6cyArMDAwMF0iLCRkYXRhWyJ0aW1lc3RhbXAiXSk7CgkJCWlmICgkbW9kZT09ImNzdiIpIHsKCQkJCSRidWZmZXI9ICJcIiRkYXRhW2lwbnVtYmVyXVwiLFwiJGRhdGVcIixcIiIuJGRhdGFbInVybCJdLiRkYXRhWyJwYXJhbXMiXS4iXCIsXCIkZGF0YVtzdGF0dXNdXCIsXCIkZGF0YVtieXRlc11cIixcIiIuJGRhdGFbInJlZmVycmVyIl0uJGRhdGFbInJlZnBhcmFtcyJdLiJcIixcIiIuJGRhdGFbInVzZXJhZ2VudCJdLiJcIlxuIjsgCgkJCQkKCQkJfSBlbHNlIHsKCQkJICAgJGJ1ZmZlcj0gIiRkYXRhW2lwbnVtYmVyXSAtIC0gJGRhdGUgXCJHRVQgIi4kZGF0YVsidXJsIl0uJGRhdGFbInBhcmFtcyJdLiIgSFRUUC8xLjFcIiAiLiRkYXRhWyJzdGF0dXMiXS4iICIuJGRhdGFbImJ5dGVzIl0uIiBcIiIuJGRhdGFbInJlZmVycmVyIl0uJGRhdGFbInJlZnBhcmFtcyJdLiJcIiBcIiIuJGRhdGFbInVzZXJhZ2VudCJdLiJcIlxuIjsKCQkJfQoJCQkKCQkJLy9lY2hvICRidWZmZXI7CgkJCWd6d3JpdGUgKCRmcCwgJGJ1ZmZlcik7CgkJfQoJCWd6Y2xvc2UgKCRmcCk7CgkJJGkrKzsKCQllY2hvICJ3cm90ZSBmaWxlOiAkYnVwZmlsZTxicj4iOwoJCWxnZmx1c2goKTsKCX0KICAgIGlmIChAJHVwZ3JhZGUhPSJ0cnVlIikgeyAKICAgICAgICBpZiAoJG1vZGU9PSJjc3YiKSB7CiAgICAgICAgICAgIGVjaG8gIjxQPjxsaT4gIi5fT0tfQ1NWX0ZJTEVfV1JJVFRFTl9JTi4iIDxiPiRidXBmaWxlPC9iPi48L1A+PFA+Ii5fUExFQVNFX0RPV05MT0FEX05PVy4iOjxicj4gPGI+PGEgaHJlZj1cImZpbGVzLyRjdXJwcm9maWxlbmFtZS4iLiBkYXRlKCJZbWQiLCRmcm9tKSAuIGRhdGUoIi1ZbWQiLCR0bykgLiAiLmNzdi5nelwiPiBmaWxlcy8kY3VycHJvZmlsZW5hbWUuIi4gZGF0ZSgiWW1kIiwkZnJvbSkgLiBkYXRlKCItWW1kIiwkdG8pIC4gIi5sb2cuZ3ogPC9hPjwvYj48dWw+PGxpPlRoZSBmaXJzdCByb3cgaW4gdGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBjb2x1bW4gbmFtZXM8L2xpPjxsaT5GaWVsZHMgaW4gdGhpcyBDU1YgZmlsZSBhcmUgc3BlcmF0ZWQgYnkgYSBjb21tYTwvbGk+PGxpPkFsbCBmaWVsZHMgYXJlIGVuY2xvc2VkIGluIFwiIFwiIGRvdWJsZSBxdW90ZXMuPC9saT48L3VsPjwvcD4iOyAvL0hFTFAhCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWNobyAiPFA+PGxpPiBPSywgbG9nIGZpbGUgd3JpdHRlbi4gUGxlYXNlIGRvd25sb2FkIG5vdzo8YnI+IDxiPjxhIGhyZWY9XCJmaWxlcy8kY3VycHJvZmlsZW5hbWUuIi4gZGF0ZSgiWW1kIiwkZnJvbSkgLiBkYXRlKCItWW1kIiwkdG8pIC4gIi5sb2cuZ3pcIj4gZmlsZXMvJGN1cnByb2ZpbGVuYW1lLiIuIGRhdGUoIlltZCIsJGZyb20pIC4gZGF0ZSgiLVltZCIsJHRvKSAuICIubG9nLmd6IDwvYT48L2I+PFA+IjsgICAgCiAgICAgICAgfQogICAgICAgIGVjaG8gIjxQPldlIHJlY29tbWVuZCB0byByZW1vdmUgdGhlIGZpbGUgZnJvbSB0aGUgc2VydmVyIG9uY2UgeW91IGhhdmUgZG93bmxvYWRlZCBpdC48UD4iOwogICAgCiAgICB9IGVsc2UgeyAKICAgICAgICBAJGRiLT5FeGVjdXRlKCJkcm9wIHRhYmxlICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lIik7CiAgICAgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV92cGQiKTsKICAgICAgICBAJGRiLT5FeGVjdXRlKCJkcm9wIHRhYmxlICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3ZwbSIpOwogICAgICAgIEAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfZGFpbHl1cmxzIik7IAogICAgICAgIEAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfY29udmVyc2lvbnMiKTsKICAgICAgICBjcmVhdGVEYXRhVGFibGUoJGVkaXRwcm9maWxlKTsKICAgICAgICBlY2hvICJPSywgbG9nIGZpbGUgd3JpdHRlbiB0byAkYnVwZmlsZS48UD4gPGEgaHJlZj1cInVwZGF0ZS5waHA/Y29uZj0kZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lJnVwZ3JhZGU9JGJ1cGZpbGVcIj5DbGljayBoZXJlIHRvIGNvbnRpbnVlIHVwZ3JhZGU8L2E+LiAoSW1wb3J0cyB5b3Ugb2xkIGxvZyBkYXRhIGJhY2sgaW50byB0aGUgbmV3IGRhdGFiYXNlIHN0dWN0dXJlKTxQPldoZW4gdGhhdCBpcyBkb25lLCB5b3UgY2FuIHNhZmVseSByZW1vdmUgb3IgYXJjaGl2ZSB0aGUgZmlsZTogJGJ1cGZpbGUiOwogICAgfSAKICAgIGV4aXQoKTsKfQoKaWYgKGlzc2V0KCRzZXRfcHJvZmlsZV9zdHJ1Y3R1cmVfdmVyc2lvbikpIHsKICAgIGlmICgkZWRpdHByb2ZpbGUtPnByb2ZpbGVsb2FkZWQpIHsKICAgICAgICBpZiAoISR2YWxpZFVzZXJSZXF1aXJlZCB8fCBAJHNlc3Npb24tPmlzQWRtaW4oKSkgewogICAgICAgICAgICBlY2hvV2FybmluZygiTWFudWFsbHkgY2hhbmdlZCB0aGlzIHByb2ZpbGUncyBzdHJ1Y3R1cmUgdmVyc2lvbiB0byBmcm9tICRlZGl0cHJvZmlsZS0+c3RydWN0dXJlX3ZlcnNpb24gdG8gJHNldF9wcm9maWxlX3N0cnVjdHVyZV92ZXJzaW9uIik7CiAgICAgICAgICAgICRlZGl0cHJvZmlsZS0+c3RydWN0dXJlX3ZlcnNpb24gPSAkc2V0X3Byb2ZpbGVfc3RydWN0dXJlX3ZlcnNpb247CiAgICAgICAgICAgICRlZGl0cHJvZmlsZS0+U2F2ZSgpOwogICAgICAgICAgICAvLyBub3cgd2UgaGF2ZSB0byByZWxvYWQgdGhlIHByb2ZpbGUgKGFsc28gdGhlICRwcm9maWxlIG9uZSB3aGljaCBpcyBjcmVhdGVkIGluIGNvbW1vbiBhbmQgdXNlZCBpbiB0b3AgdG8gY2hlY2sgdmVyc2lvbnMhKQogICAgICAgICAgICAkZWRpdHByb2ZpbGUtPkxvYWQoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSk7CiAgICAgICAgICAgICRwcm9maWxlLT5Mb2FkKCRwcm9maWxlLT5wcm9maWxlbmFtZSk7IAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVjaG9XYXJuaW5nKF9TT1JSWV9OT19QRVJNSVNTSU9OUyk7CiAgICAgICAgfSAgICAgICAgICAgIAogICAgfQp9CgppbmNsdWRlICJ0b3AucGhwIjsKCmlmIChpc3NldCgkX1JFUVVFU1RbJ2FyY2hpdmV0YWJsZSddKSkgewogICAgaW5jbHVkZSAiaW5jbHVkZXMvYXJjaGl2ZXRhYmxlLnBocCI7Cn0KCi8vIE5vIHJpZ2h0cyB0byBjcmVhdGUgYSBuZXcgb25lPyAgVHVybiBvZmYgdGhlICJOZXciIGZsYWcKaWYgKCR2YWxpZFVzZXJSZXF1aXJlZCAmJiAoISRzZXNzaW9uLT5pc0FkbWluKCkgJiYgISRzZXNzaW9uLT5jYW5BZGRQcm9maWxlcygpKSkgewoJdW5zZXQoJG5ldyk7Cn0KCmlmICgoaXNzZXQoJHNhdmUpKSAmJiAoJGVkaXRwcm9maWxlLT5wcm9maWxlbG9hZGVkKSAmJiAoISRzYXZlZXJyb3IpKSB7CglpZiAoJHEgPSBAJGRiLT5FeGVjdXRlKCJzZWxlY3QgKiBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lIGxpbWl0IDEiKSkgewoJCSRjaGs9JHEtPkZldGNoUm93KCk7CiAgICAgICAgY3JlYXRlRGF0YVRhYmxlKCRlZGl0cHJvZmlsZSk7IAoJCS8vJHNhdmVkPSRzYXZlZC4iTXlzcWwgVGFibGUgPGI+JGVkaXRwcm9maWxlLT50YWJsZW5hbWU8L2I+IGFscmVhZHkgZXhpc3RzLCBza2lwcGluZyBDUkVBVEUuPGJyPiI7Cgl9IGVsc2UgewoJCWNyZWF0ZURhdGFUYWJsZSgkZWRpdHByb2ZpbGUpOwoJCSRzYXZlZD0kc2F2ZWQuIkNyZWF0ZWQgdGFibGVzIGZvciA8Yj4kZWRpdHByb2ZpbGUtPnRhYmxlbmFtZTwvYj4gaW4gZGF0YWJhc2UgPGI+JERhdGFiYXNlTmFtZTwvYj48YnI+IjsgIAoJfQoJCgkvLyBHZXQgVGhlIHVzZXJzIGZhY2Vib29rIElEIGFuZCBUT0tFTgoJaWYoIWVtcHR5KCRlZGl0cHJvZmlsZS0+ZmFjZWJvb2tsb2dpbikgJiYgZ2V0UHJvZmlsZURhdGEoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSwgJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZS4iZmFjZWJvb2tBcGkiLiRlZGl0cHJvZmlsZS0+ZmFjZWJvb2tsb2dpbiAsIGZhbHNlICkgPT0gZmFsc2UpewoJCWRlbGV0ZVByb2ZpbGVEYXRhKCRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUsICRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUuImZhY2Vib29rQXBpJSIpOwoJCWRlbGV0ZVByb2ZpbGVEYXRhKCRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUsICRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUuImZhY2Vib29rQXBpRm9ybSIpOwoJCWRlbGV0ZVByb2ZpbGVEYXRhKCRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUsICRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUuImZhY2Vib29rQXBwRm9ybSIpOwoJCWRlbGV0ZVByb2ZpbGVEYXRhKCRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUsICRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUuImZhY2Vib29rUGFnZUZvcm0iKTsKCQkkc2F2ZWQuPSI8ZGl2IGlkPSdmYWNlYm9va19mZWVkYmFjayc+PC9kaXY+IjsKCQkkc2F2ZWQuPSAiPHNjcmlwdCBzcmM9J2h0dHA6Ly9mYWNlYm9vay5sb2dhaG9saWMuY29tL2ZhY2Vib29rX2FjY2Vzcy5waHA/ZW1haWw9eyRlZGl0cHJvZmlsZS0+ZmFjZWJvb2tsb2dpbn0mY29uZj17JGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZX0nPjwvc2NyaXB0PiI7Cgl9Cn0KJHN0YXJ0PWdldG1pY3JvdGltZSgpOwoKaWYgKCR2YWxpZFVzZXJSZXF1aXJlZCAmJiAhJHNlc3Npb24tPmlzQWRtaW4oKSAmJiAhZW1wdHkoJGRlbCkpIHsKCWVjaG9XYXJuaW5nKF9TT1JSWV9OT19QRVJNSVNTSU9OUywnbWFyZ2luOjAgMjBweCA1cHg7Jyk7CgkkX1JFUVVFU1RbImRlbCJdID0gJyc7CgkkZGVsID0gJyc7Cn0KCmlmICghaXNzZXQoJGRlbCkpIHsKCSRkZWw9MDsgCn0KaWYgKCRkZWw9PTEpIHsKCSBpZiAoJGN1cnByb2ZpbGVuYW1lIT0iIikgewoJCWVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+PGI+Ii5fREFUQUJBU0VfTUFJTlRFTkFOQ0VfT1BUSU9OUy4iOiA8Zm9udCBjb2xvcj1yZWQ+JGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZTwvZm9udD48L2I+PHA+IjsKICAgICAgICBlY2hvICI8UD4iLl9QTEVBU0VfQ0hPT1NFX0FOX09QVElPTi4iOjxQPjx1bD4iOwogICAgICAgIC8vaWYgKCEkdmFsaWRVc2VyUmVxdWlyZWQgfHwgQCRzZXNzaW9uLT5jYW5FZGl0UHJvZmlsZXMoKSkgewogICAgICAgIGlmICghJHZhbGlkVXNlclJlcXVpcmVkIHx8IEAkc2Vzc2lvbi0+Y2FuVXBkYXRlTG9ncygpKSB7ICAgICAgICAgICAgICAgICAgICAKCQkgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJmJhY2t1cD0xXCI+Ii5fQkFDS1VQX0VYUE9SVDsKCQkgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJnJlc3RvcmVkZWZhdWx0ZGFzaGJvYXJkPTFcIj48Yj4iLiBfUkVTVE9SRV9ERUZBVUxUX0RBU0hCT0FSRCAuICI8L2I+PC9hPjxwPiI7CgkJfQoJCQoJCWlmICgoISR2YWxpZFVzZXJSZXF1aXJlZCkgfHwgKCRzZXNzaW9uLT5jYW5FZGl0UHJvZmlsZXMoKSkpIHsKCQkgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJnZXRfcmVwb3J0cy5waHA/Y29uZj0kY3VycHJvZmlsZW5hbWVcIj48Yj4iLl9JTlNUQUxMX1JFUE9SVFMuIjwvYj48L2E+PHA+IjsKCQkgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJyZXBvcnR1cGRhdGVzLnBocD9jb25mPSRjdXJwcm9maWxlbmFtZVwiPjxiPiIuX1VQREFURS4nICcuX1JFUE9SVFMuIjwvYj48L2E+PHA+IjsKCQl9CgkJCgkJaWYoTE9HQUhPTElDX1ZFUlNJT05fU1RBVFVTID09ICdkZXYnKSB7CiAgICAgICAgLy8gaWYgKCEkdmFsaWRVc2VyUmVxdWlyZWQgfHwgJHNlc3Npb24tPmlzQWRtaW4oKSkgewoJCQllY2hvICI8bGk+PGEgaHJlZj1cInByb2ZpbGVzLnBocD9lZGl0Y29uZj17JGN1cnByb2ZpbGVuYW1lfSZ1cGRhdGVfbWV0aG9kPTFcIj48Yj4iLl9VUERBVEVfTUVUSE9EX1BSRUZFUkVOQ0UuIjwvYj48L2E+PHA+IjsKCQl9CgkJCiAgICAgICAgaWYgKCEkdmFsaWRVc2VyUmVxdWlyZWQgfHwgQCRzZXNzaW9uLT5jYW5VcGRhdGVMb2dzKCkpIHsKCQkgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJmRlbD01XCI+ICIuX0RFTEVURV9EQVRFX1JBTkdFOwogICAgICAgICAgICBlY2hvICI8TEk+IDxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJmRlbD0yXCIgb25jbGljaz1cInJldHVybiBjb25maXJtKCciLl9ERUxFVEVfUFJPRklMRV9BTkRfREFUQUJBU0VfQVNTVVJBTkNFLiInKVwiPiIuX0RFTEVURV9QUk9GSUxFX0FORF9EQVRBQkFTRS4iPC9hPiA8UD4iOwogICAgICAgICAgICBlY2hvICI8bGk+IDxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJmRlbD00XCIgb25jbGljaz1cInJldHVybiBjb25maXJtKCciLl9ERUxFVEVfREFUQUJBU0VfQVNTVVJBTkNFLiInKVwiPiIuX0RFTEVURV9EQVRBQkFTRS4iPC9hPjxwPiI7CiAgICAgICAgICAgIGVjaG8gIjxsaT4gPGEgaHJlZj1cInByb2ZpbGVzLnBocD9lZGl0Y29uZj0kY3VycHJvZmlsZW5hbWUmZGVsPTdcIiBvbmNsaWNrPVwicmV0dXJuIGNvbmZpcm0oJyIuX0RFTEVURV9TVU1NQVJZX1RBQkxFU19BU1NVUkFOQ0UuIicpXCI+Ii5fREVMRVRFX1NVTU1BUllfVEFCTEVTLiI8L2E+PHA+IjsKICAgICAgICAgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJmRlbD04XCI+Ii5fREVMRVRFX0NBQ0hFLiI8L2E+PHA+PC91bD4iOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoISR2YWxpZFVzZXJSZXF1aXJlZCB8fCBAJHNlc3Npb24tPmNhblVwZGF0ZUxvZ3MoKSkgeyAKICAgICAgICAgICAgZWNobyAiPGxpPjxiPiIuX1NQRUNJQUxUWV9VUERBVEVfT1BUSU9OUy4iPC9iPjo8UD48dWw+IjsKICAgICAgICAgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJnVwZGF0ZV9jb3VudHJpZXM9MVwiPlVwZGF0ZSBDb3VudHJ5IEluZm9ybWF0aW9uIGluIERhdGFiYXNlPC9hPjxwPiI7IAogICAgICAgICAgICBlY2hvICI8bGk+PGEgaHJlZj1cInByb2ZpbGVzLnBocD9lZGl0Y29uZj0kY3VycHJvZmlsZW5hbWUmZGVsPTExXCI+ICIuX1VQREFURV9TVU1NQVJZX1RBQkxFU19XT1VUX0NIRUNLSU5HLiI8L2E+PHA+IjsKICAgICAgICAgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJ1cGRhdGUucGhwP2NvbmY9JGN1cnByb2ZpbGVuYW1lJmZvcmNlPXRydWVcIj4gIi5fVVBEQVRFX1NUQVRTX1dPVVRfREFURV9SQU5HRV9DSEVDS1MuIjwvYT48cD4iOwogICAgICAgICAgICBlY2hvICI8bGk+PGEgaHJlZj1cInVwZGF0ZS5waHA/Y29uZj0kY3VycHJvZmlsZW5hbWUmZm9yY2U9dHJ1ZSZtb3ZlZG9uZT10cnVlXCIgb25jbGljaz1cInJldHVybiBjb25maXJtKCciLl9NT1ZFX1RPX0RPTkVfQVNTVVJBTkNFLiInKVwiPiIuX01PVkVfVE9fRE9ORS4iPC9hPjxwPjwvdWw+IjsKICAgICAgICB9CiAgICAgICAgZWNobyAiPGxpPjxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJmVkaXQ9MVwiPiAiLl9FRElUX1BST0ZJTEUuIjwvYT48UD4iOwoJCWVjaG8gIjxsaT48YSBocmVmPVwicHJvZmlsZXMucGhwP2VkaXRjb25mPSRjdXJwcm9maWxlbmFtZVwiPiA8Yj4iLl9DQU5DRUwuIjwvYj48L2E+PC91bD4iOwogICAgICAgIGVjaG8gIjxQPiI7CiAgICAgICAgCiAgICAgICAgaWYgKCEkdmFsaWRVc2VyUmVxdWlyZWQgfHwgQCRzZXNzaW9uLT5jYW5BZGRQcm9maWxlcygpKSB7CiAgICAgICAgICBpZiAoJHEgPSBAJGRiLT5FeGVjdXRlKCJTRUxFQ1QgdGFibGVfc2NoZW1hIFwiRGF0YSBCYXNlIE5hbWVcIiwgdGFibGVfbmFtZSwgc3VtKCBkYXRhX2xlbmd0aCArIGluZGV4X2xlbmd0aCApIC8gMTAyNCAvIDEwMjQgXCJEYXRhIEJhc2UgU2l6ZSBpbiBNQlwiIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLlRBQkxFUyB3aGVyZSB0YWJsZV9zY2hlbWE9JyREYXRhYmFzZU5hbWUnIGFuZCAodGFibGVfbmFtZT0nJGVkaXRwcm9maWxlLT50YWJsZW5hbWUnIG9yIHRhYmxlX25hbWUgbGlrZSAnJGVkaXRwcm9maWxlLT50YWJsZW5hbWVcXyUnKSBHUk9VUCBCWSB0YWJsZV9zY2hlbWEiKSkgewogICAgICAgICAgICAKICAgICAgICAgICAgJGNoaz0kcS0+RmV0Y2hSb3coKTsKICAgICAgICAgICAgJGluZm8gPSBfVE9UQUxfU0laRV9PRl9USElTX1BST0ZJTEUuIiAiLm51bWJlcl9mb3JtYXQoJGNoa1syXSwwKS4iIE1CLiAiOwogICAgICAgICAgICAkcSA9ICRkYi0+RXhlY3V0ZSgic2VsZWN0IGNvdW50KCopIGZyb20gJGVkaXRwcm9maWxlLT50YWJsZW5hbWUiKTsKICAgICAgICAgICAgJGNoaz0kcS0+RmV0Y2hSb3coKTsKICAgICAgICAgICAgJGluZm8uPSBfVEhFUkVfQVJFLiIgJGNoa1swXSAiLl9SRUNPUkRTX0lOX01BSU5fU1BBTk5JTkcuIiAiOwogICAgICAgICAgICAkcSA9ICRkYi0+RXhlY3V0ZSgic2VsZWN0IHRpbWVzdGFtcCBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lIG9yZGVyIGJ5IHRpbWVzdGFtcCBhc2MgbGltaXQgMSIpOwogICAgICAgICAgICAkY2hrPSRxLT5GZXRjaFJvdygpOwogICAgICAgICAgICAkZnJvbT0kY2hrWzBdOwogICAgICAgICAgICAkaW5mby49IGRhdGUoIlktbS1kIiwkY2hrWzBdKSAuICIgdG8gIjsKICAgICAgICAgICAgJHEgPSAkZGItPkV4ZWN1dGUoInNlbGVjdCB0aW1lc3RhbXAgZnJvbSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZSBvcmRlciBieSB0aW1lc3RhbXAgZGVzYyBsaW1pdCAxIik7CiAgICAgICAgICAgICRjaGs9JHEtPkZldGNoUm93KCk7CiAgICAgICAgICAgICR0bz0kY2hrWzBdOwogICAgICAgICAgICAkaW5mby49IGRhdGUoIlktbS1kLCAgSDppOnMiLCRjaGtbMF0pIC4gIi4gKCIuX1NFRV9NT1JFX1NUQVRJU1RJQ1NfQkVMT1cuIik8YnI+PGJyPiI7CiAgICAgICAgICAgICRpbmZvLj0gIlByb2ZpbGUgc3R1Y3R1cmUgdmVyc2lvbiBpczogJGVkaXRwcm9maWxlLT5zdHJ1Y3R1cmVfdmVyc2lvbiI7CiAgICAgICAgICAgIGVjaG9Ob3RpY2UoJGluZm8sIndpZHRoOjY0MHB4OyIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAKICAgICAgICBpZiAoISR2YWxpZFVzZXJSZXF1aXJlZCB8fCBAJHNlc3Npb24tPmNhbkFkZFByb2ZpbGVzKCkpIHsgCiAgICAgICAgICAgICRxdWVyeT0gIlNFTEVDVCB0YWJsZV9uYW1lLCB0YWJsZV9yb3dzLCBzdW0oIGRhdGFfbGVuZ3RoICsgaW5kZXhfbGVuZ3RoICkgLyAxMDI0IC8gMTAyNCBcIkRhdGEgQmFzZSBTaXplIGluIE1CXCIgIjsKICAgICAgICAgICAgLy8kcXVlcnkgLj0gIiwgY29uY2F0KFwiPGEgaHJlZj1wcm9maWxlcy5waHA/ZWRpdGNvbmY9JGN1cnByb2ZpbGVuYW1lJmFyY2hpdmV0YWJsZT1cIix0YWJsZV9uYW1lLFwiPkNyZWF0ZSBhcmNoaXZlPC9hPlwiKSBhcyBhcmNoaXZlICI7CiAgICAgICAgICAgICRxdWVyeSAuPSAiRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEuVEFCTEVTIHdoZXJlIHRhYmxlX3NjaGVtYT0nJERhdGFiYXNlTmFtZScgYW5kICh0YWJsZV9uYW1lPSckZWRpdHByb2ZpbGUtPnRhYmxlbmFtZScgb3IgdGFibGVfbmFtZSBsaWtlICckZWRpdHByb2ZpbGUtPnRhYmxlbmFtZVxfJScpIEdST1VQIEJZIHRhYmxlX25hbWUiOwogICAgICAgICAgICAvLyRzaG93ZmllbGRzPSJ0YWJsZSBuYW1lLCIuX1JFQ09SRFMuIiwiLl9TSVpFSU5NQi4iLCBBcmNoaXZlIjsKICAgICAgICAgICAgJHNob3dmaWVsZHM9InRhYmxlIG5hbWUsIi5fUkVDT1JEUy4iLCIuX1NJWkVJTk1COwogICAgICAgICAgICAkbGFiZWxzPV9EQVRBQkFTRV9TVEFUSVNUSUNTOwogICAgICAgICAgICAvLyRtaW5pPTE7CiAgICAgICAgICAgIGVjaG8gIjx0YWJsZSB3aWR0aD02NDA+PHRyPjx0ZD4iOwogICAgICAgICAgICBAU3RhdHNUYWJsZSgkZnJvbSwkdG8sJHNob3dmaWVsZHMsJGxhYmVscywkcXVlcnksJGRyaWxsZG93biwkZmlsdGVyKTsKICAgICAgICAgICAgZWNobyAiPC90ZD48L3RyPjwvdGFibGU+IjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZWNobyAiPC9kaXY+IiA7CgkJZXhpdCgpOwogICAgfQp9CgppZiAoJGRlbD09MikgewoJaWYgKCRlZGl0cHJvZmlsZS0+cHJvZmlsZWxvYWRlZCkgewogICAgICAgIGlmICghJHZhbGlkVXNlclJlcXVpcmVkIHx8IEAkc2Vzc2lvbi0+Y2FuRWRpdFByb2ZpbGVzKCkpIHsKICAgICAgICAKCSAgICAgICAgZWNobyAiPGRpdiBjbGFzcz1pbmRlbnRib2R5Pjxmb250IGNvbG9yPXJlZD5MYXN0IEFjdGlvbjo8L2ZvbnQ+PGJyPjxpPiI7CgkJICAgICRxdWVyeSA9ICJEZWxldGUgZnJvbSAiLlRCTF9QUk9GSUxFUy4iIHdoZXJlIHByb2ZpbGVpZCA9ICIuJGVkaXRwcm9maWxlLT5wcm9maWxlaWQ7CgkJICAgIGlmICghJGRiLT5FeGVjdXRlKCRxdWVyeSkpIHsKCQkgICAgIGRpZShfQ09VTEROVF9ERUxFVEVfUFJPRklMRS4iICIgLiAkZGItPkVycm9yTXNnKCkpOwoJCSAgICB9IGVsc2UgewoJCQkgICAgZWNobyBfREVMRVRFRF9QUk9GSUxFLiI6IDxiPiIuJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZS4iPC9iPjxicj4iOwoJCSAgICB9CgkJICAgIGRlbGV0ZVByb2ZpbGVEYXRhKCRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUpOwoJCSAgICBpZiAoISRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAiLiRlZGl0cHJvZmlsZS0+dGFibGVuYW1lKSkgewoJCQkgICAgZWNobygiPHA+Ii5fQ09VTEROVF9EUk9QX1RBQkxFLiIgIi4kZWRpdHByb2ZpbGUtPnRhYmxlbmFtZS4iLCAiLiRkYi0+RXJyb3JNc2coKS4iPC9wPiIpOwoJCSAgICB9IGVsc2UgewoJCQkgICAgZWNobyBfRFJPUFBFRF9EQl9UQUJMRVMuIjogPGI+Ii4kZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLiI8L2I+PGJyPiI7CgkJICAgIH0KCQkgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV92cGQiKTsKCQkgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV92cG0iKTsKICAgICAgICAgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV9kYWlseXVybHMiKTsgCgkJICAgIEAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfY29udmVyc2lvbnMiKTsKCQkgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV91cmxzIik7CiAgICAgICAgICAgIEAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfdXJscGFyYW1zIik7CiAgICAgICAgICAgIEAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfa2V5d29yZHMiKTsKICAgICAgICAgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV9yZWZlcnJlcnMiKTsKICAgICAgICAgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV9yZWZwYXJhbXMiKTsKICAgICAgICAgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV9zZXNzaW9uaWRzIik7CiAgICAgICAgICAgIEAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfdmlzaXRvcmlkcyIpOwogICAgICAgICAgICBAJGRiLT5FeGVjdXRlKCJkcm9wIHRhYmxlICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3NjcmVlbnJlcyIpOwogICAgICAgICAgICBAJGRiLT5FeGVjdXRlKCJkcm9wIHRhYmxlICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX2NvbG9yZGVwdGgiKTsKICAgICAgICAgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV91c2VyYWdlbnRzIik7CiAgICAgICAgICAgIEAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgIi4kZWRpdHByb2ZpbGUtPnRhYmxlbmFtZS4iX3RsZW5ndGgiKTsgLy8gdGhlc2UgbGFzdCAyIGFyZSBzZW1pIHRlbXBvcmFyeSB0YWJsZXMgdGhhdCBzaG91bGQgYmUgZGVsZXRlZCB3aGVuIHJ1bm5pbmcgVG90YWwgRHVyYXRpb24gYW5kIFRpbWVvbiBzaXRlIFRvZGF5IHJlcG9ydHMsIGJ1dCB3ZSdsbCBkZWxldGUgdGhlbiBoZXJlIGp1c3QgaW4gY2FzZS4KICAgICAgICAgICAgQCRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAiLiRlZGl0cHJvZmlsZS0+dGFibGVuYW1lLiJfdmxlbmd0aCIpOwogICAgICAgICAgICBAJGRiLT5FeGVjdXRlKCJkcm9wIHRhYmxlICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3RyYWNrZXJsb2ciKTsKCQkgICAgCgkJICAgIGVjaG8gX1NVTU1BUllfVEFCTEVTX0RST1BQRUQuIi48YnI+Ii5fRE9ORS4iLjwvaT48L2Rpdj48aHIgbm9zaGFkZSBzaXplPTE+PGJyPiI7CiAgICAgICAgICAgIGRlbGV0ZVByb2ZpbGVEYXRhKCRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUpOwoJCQkKCQkJdW5zZXQoJF9TRVNTSU9OWydwcm9maWxlb2JqZWN0J10pOwoJCQl1bnNldCgkX1NFU1NJT05bJ3Byb2ZpbGVuYW1lJ10pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+IjsKICAgICAgICAgICAgZWNob1dhcm5pbmcoX1NPUlJZX05PX1BFUk1JU1NJT05TKTsKICAgICAgICAgICAgZWNobyAiPFA+Jm5ic3A7PC9QPjwvZGl2PiI7CiAgICAgICAgfSAKCX0KfQoKaWYgKCRkZWw9PTMpIHsKCSBpZiAoJGVkaXRwcm9maWxlLT5wcm9maWxlbG9hZGVkKSB7CgkJICRxdWVyeSA9ICJEZWxldGUgZnJvbSAiLlRCTF9QUk9GSUxFUy4iIHdoZXJlIHByb2ZpbGVpZCA9ICIuJGVkaXRwcm9maWxlLT5wcm9maWxlaWQ7CgkJICRkYi0+RXhlY3V0ZSgkcXVlcnkpIG9yIGRpZSgiQ291bGRuJ3QgZGVsZXRlIHByb2ZpbGUuICIgLiAkZGItPkVycm9yTXNnKCkpOwoJCSBkZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lKTsKCQkgZWNobyAiPGRpdiBjbGFzcz1cImluZGVudGJvZHlcIj48Zm9udCBjb2xvcj1yZWQ+Ii5fTEFTVF9BQ1RJT04uIjo8L2ZvbnQ+PGJyPiIuX0RFTEVURURfUFJPRklMRS4iOiA8Yj4kZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lPC9iPjxicj4iLl9QTEVBU0VfRFJPUF9EQl9UQUJMRVMuIiA8Yj4nJGVkaXRwcm9maWxlLT50YWJsZW5hbWUnPC9iPiAiLl9NQU5VQUxMWV9PUl9LRUVQX0lULiI8L2k+PC9kaXY+PGhyIG5vc2hhZGUgc2l6ZT0xPjxicj4iOwogICAgICAgICBkZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lKTsgCgkgfQp9CgppZiAoJGRlbD09NCkgewoJaWYgKCRlZGl0cHJvZmlsZS0+cHJvZmlsZWxvYWRlZCkgewogICAgICAgIGlmICghJHZhbGlkVXNlclJlcXVpcmVkIHx8IEAkc2Vzc2lvbi0+Y2FuRWRpdFByb2ZpbGVzKCkpIHsKCQkKICAgICAgICAgICAgZGVsZXRlRGF0YVRhYmxlKCRlZGl0cHJvZmlsZSk7IAogICAgICAgIAoJCSAgICBjcmVhdGVEYXRhVGFibGUoJGVkaXRwcm9maWxlKTsKCQkKICAJICAgICAgICAvLyBkZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lKTsKCQkJCgkJCWRlbGV0ZVByb2ZpbGVEYXRhKCRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUsICJjYWNoZVxfJSIpOwoJCQlkZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLCAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZS4iJVxfY2FjaGVhcnJheSIpOwoJCQlkZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLCAkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLiIuY2FjaGVcXyUiKTsKCQkJZGVsZXRlUHJvZmlsZURhdGEoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSwgJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZS4iY2FjaGVfdHJhaWwiKTsKCQkJZGVsZXRlUHJvZmlsZURhdGEoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSwgImxhc3Rsb2dwb3MuJSIpOwoJCQlkZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLCAiZmlyc3Rsb2dsaW5lLiUiKTsKCQkJZGVsZXRlUHJvZmlsZURhdGEoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSwgIjFzdGxvZ2xpbmUuJSIpOwoJCQlkZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lLCAibGFzdGtub3ducG9zLiUiKTsKCQkJZGVsZXRlUHJvZmlsZURhdGEoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSwgJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZS4iLmJhbmR3aWR0aERhdGEiKTsKCQkJZGVsZXRlUHJvZmlsZURhdGEoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSwgJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZS4iLnVwZGF0ZV9ydW5uaW5nIik7CgkJCWRlbGV0ZVByb2ZpbGVEYXRhKCRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUsICRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWUuIi5wZXJsdXBkYXRlX3J1bm5pbmciKTsKICAJCgkJICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+PGZvbnQgY29sb3I9cmVkPiIuX0xBU1RfQUNUSU9OLiI6PC9mb250Pjxicj48aT4iLl9ERUxFVEVEX0RCX1RBQkxFUy4iIDxiPickZWRpdHByb2ZpbGUtPnRhYmxlbmFtZSc8L2I+ICIuX0FORF9TVU1NQVJJRVNfUFJPRklMRV9TQVZFRC4iPC9pPjwvZGl2PjxociBub3NoYWRlIHNpemU9MT48YnI+IjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlY2hvICI8ZGl2IGNsYXNzPVwiaW5kZW50Ym9keVwiPiI7CiAgICAgICAgICAgIGVjaG9XYXJuaW5nKF9TT1JSWV9OT19QRVJNSVNTSU9OUyk7CiAgICAgICAgICAgIGVjaG8gIjxQPiZuYnNwOzwvUD48L2Rpdj4iOyAKICAgICAgICB9Cgl9Cn0KaWYgKCRkZWw9PTUpIHsKCWlmICgkZWRpdHByb2ZpbGUtPnByb2ZpbGVsb2FkZWQpIHsKICAgICAgICBpZiAoISR2YWxpZFVzZXJSZXF1aXJlZCB8fCBAJHNlc3Npb24tPmNhbkVkaXRQcm9maWxlcygpKSB7CgkJICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+Ii5fREVMRVRFX0RBVEVfUkFOR0VfRlJPTS4iIDxiPiRlZGl0cHJvZmlsZS0+cHJvZmlsZW5hbWU8L2I+PFA+PGZvcm0gbWV0aG9kPWdldCBhY3Rpb249XCJwcm9maWxlcy5waHBcIj4iOwoJCSAgICBlY2hvICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1kZWwgdmFsdWU9Nj4iOwoJCSAgICBEYXRlU2VsZWN0b3IoJGZyb20sJHRvKTsKCQkgICAgZWNobyAiPGlucHV0IHR5cGU9cmFkaW8gbmFtZT13aGF0IHZhbHVlPTIgY2hlY2tlZD4gIi5fREVMRVRFX0FMTF9MT0dfREFUQS4iPGJyPiI7CiAgICAgICAgICAgIGVjaG8gIjxpbnB1dCB0eXBlPXJhZGlvIG5hbWU9d2hhdCB2YWx1ZT0xPiAiLl9ERUxFVEVfT05MWV9ERVRBSUxfREFUQS4iPGJyPiI7CiAgICAgICAgICAgIGVjaG8gIjxpbnB1dCB0eXBlPXJhZGlvIG5hbWU9d2hhdCB2YWx1ZT0zPiAiLl9ERUxFVEVfT05MWV9TVU1NQVJZX0RBVEEuIjxicj4iOwoJCSAgICBlY2hvICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1lZGl0Y29uZiB2YWx1ZT1cIiRjdXJwcm9maWxlbmFtZVwiPiI7CgkJICAgIGVjaG8gIjxpbnB1dCB0eXBlPXN1Ym1pdCBuYW1lPXN1Ym1pdCB2YWx1ZT1EZWxldGU+ICAiLl9QTEVBU0VfQkVfUEFUSUVOVF9ERUxFVElOR19UQUtFU19BX1dISUxFLiI8L2Rpdj4iOwoJCSAgICBleGl0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWNobyAiPGRpdiBjbGFzcz1cImluZGVudGJvZHlcIj4iOwogICAgICAgICAgICBlY2hvV2FybmluZyhfU09SUllfTk9fUEVSTUlTU0lPTlMpOwogICAgICAgICAgICBlY2hvICI8UD4mbmJzcDs8L1A+PC9kaXY+IjsKICAgICAgICB9Cgl9Cn0KaWYgKCRkZWw9PTYpIHsKCWlmICgkZWRpdHByb2ZpbGUtPnByb2ZpbGVsb2FkZWQpIHsKCQkkd2hhdCA9ICRfUkVRVUVTVFsid2hhdCJdOwoJCWVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+PGZvbnQgY29sb3I9cmVkPiIuX0xBU1RfQUNUSU9OLiI6PC9mb250Pjxicj48aT4iOwogICAgICAgIERlbGV0ZVJhbmdlKCRlZGl0cHJvZmlsZSwkd2hhdCk7CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgZWNobyAiPC9pPjwvZGl2PjxociBub3NoYWRlIHNpemU9MT48YnI+IjsKICAJfQp9CgppZiAoJGRlbD09NykgewoJaWYgKCRlZGl0cHJvZmlsZS0+cHJvZmlsZWxvYWRlZCkgewogICAgICAgIGlmICghJHZhbGlkVXNlclJlcXVpcmVkIHx8IEAkc2Vzc2lvbi0+Y2FuRWRpdFByb2ZpbGVzKCkpIHsgCgkJICAgICRkYi0+RXhlY3V0ZSgiZHJvcCB0YWJsZSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV92cGQiKTsKCQkgICAgJGRiLT5FeGVjdXRlKCJkcm9wIHRhYmxlICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3ZwbSIpOwogICAgICAgICAgICAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfZGFpbHl1cmxzIik7IAoJCSAgICAkZGItPkV4ZWN1dGUoImRyb3AgdGFibGUgJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfY29udmVyc2lvbnMiKTsKICAgICAgICAgICAgY3JlYXRlRGF0YVRhYmxlKCRlZGl0cHJvZmlsZSk7CgkJICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+PGZvbnQgY29sb3I9cmVkPiIuX0xBU1RfQUNUSU9OLiI6PC9mb250Pjxicj48aT4iLl9ERUxFVEVEX1NVTU1BUllfREFUQV9JTl9EQVRFX1JBTkdFLiIuICIuX1NVTU1BUklFU19XSUxMX0JFX1JFQ0FMQ1VMQVRFRC4iLjwvaT48L2Rpdj48aHIgbm9zaGFkZSBzaXplPTE+PGJyPiI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWNobyAiPGRpdiBjbGFzcz1cImluZGVudGJvZHlcIj4iOwogICAgICAgICAgICBlY2hvV2FybmluZyhfU09SUllfTk9fUEVSTUlTU0lPTlMpOwogICAgICAgICAgICBlY2hvICI8UD4mbmJzcDs8L1A+PC9kaXY+IjsKICAgICAgICB9ICAgIAoJfQp9CmlmICgkZGVsPT04KSB7CglpZiAoJGVkaXRwcm9maWxlLT5wcm9maWxlbG9hZGVkKSB7CgkJZGVsZXRlUHJvZmlsZURhdGEoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSwgImNhY2hlXF8lIik7CiAgICAgICAgZGVsZXRlUHJvZmlsZURhdGEoJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSwgJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZS4iY2FjaGVfdHJhaWwiKTsKCQllY2hvICI8ZGl2IGNsYXNzPVwiaW5kZW50Ym9keVwiPjxmb250IGNvbG9yPXJlZD4iLl9MQVNUX0FDVElPTi4iOjwvZm9udD48YnI+PGk+Ii5fQUxMX0NBQ0hFX0ZJTEVTX0RFTEVURUQuIi48L2k+PC9kaXY+PGhyIG5vc2hhZGUgc2l6ZT0xPjxicj4iOwoJfQp9CgppZiAoJGRlbD09OSkgeyAvLyB0aGlzIGRlbGV0ZXMgYSBzcGVjaWZpYyBmaWxlIG9yIGlwIGZyb20gdGhlIGRhdGFiYXNlCiAgICBpZiAoJGVkaXRwcm9maWxlLT5wcm9maWxlbG9hZGVkKSB7CiAgICAgICAgJGZsZG5hbWU9ICRfUkVRVUVTVFsiZmxkbmFtZSJdOwogICAgICAgICRmbGR2YWx1ZT0gQCRfUkVRVUVTVFsiZmxkdmFsdWUiXTsgCiAgICAgICAgZWNobyAiPGRpdiBjbGFzcz1cImlkZW50Ym9keVwiPiIuX0RFTEVURS4iIDxmb250IGNvbG9yPXJlZD4kZmxkdmFsdWU8L2ZvbnQ+ICIuX0ZST00uIiA8Yj4kZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lPC9iPjxQPjxmb3JtIG1ldGhvZD1wb3N0IGFjdGlvbj1cInByb2ZpbGVzLnBocFwiPiI7CiAgICAgICAgZWNobyAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9ZGVsIHZhbHVlPTEwPiI7CiAgICAgICAgRGF0ZVNlbGVjdG9yKCRmcm9tLCR0byk7CiAgICAgICAgZWNobyAiPGJyPiRmbGRuYW1lOiA8aW5wdXQgdHlwZT10ZXh0IG5hbWU9ZmxkdmFsdWUgdmFsdWU9XCIkZmxkdmFsdWVcIj4gKCIuX0VYQUNUX1ZBTFVFX09OTFkuIik8cD4iOwogICAgICAgIGVjaG8gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWZsZG5hbWUgdmFsdWU9XCIkZmxkbmFtZVwiPiI7CiAgICAgICAgZWNobyAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9ZWRpdGNvbmYgdmFsdWU9XCIkY3VycHJvZmlsZW5hbWVcIj4iOwogICAgICAgIGVjaG8gIjxpbnB1dCB0eXBlPWNoZWNrYm94IG5hbWU9cmVjYWwgdmFsdWU9XCIxXCIgY2hlY2tlZD4gIi5fUkVDQUxDVUxBVEVfU1VNTUFSWV9UQUJMRVM7IAogICAgICAgIGVjaG8gIjxpbnB1dCB0eXBlPXN1Ym1pdCBuYW1lPXN1Ym1pdCB2YWx1ZT1EZWxldGU+ICA8L2Rpdj4iOwoKICAgICAgICBleGl0KCk7CiAgICB9Cn0KaWYgKCRkZWw9PTEwKSB7CiAgICBpZiAoJGVkaXRwcm9maWxlLT5wcm9maWxlbG9hZGVkKSB7CiAgICAgICAgJGZsZG5hbWU9ICRfUkVRVUVTVFsiZmxkbmFtZSJdOwogICAgICAgICRmbGR2YWx1ZT0gQCRfUkVRVUVTVFsiZmxkdmFsdWUiXTsKICAgICAgICAkcmVjYWw9IEAkX1JFUVVFU1RbInJlY2FsIl07CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgaWYgKCRmbGRuYW1lPT0icGFnZSIpIHsKICAgICAgICAgICAkcSA9IEAkZGItPkV4ZWN1dGUoInNlbGVjdCBpZCBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3VybHMgd2hlcmUgdXJsPSckZmxkdmFsdWUnIik7CiAgICAgICAgICAgJHBhZ2U9JHEtPkZldGNoUm93KCk7CiAgICAgICAgICAgJGRiLT5FeGVjdXRlKCJkZWxldGUgZnJvbSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZSB3aGVyZSB0aW1lc3RhbXAgPj0kZnJvbSBhbmQgdGltZXN0YW1wIDw9JHRvIGFuZCB1cmw9JyRwYWdlW2lkXSciKTsKICAgICAgICAgICAkZGItPkV4ZWN1dGUoImRlbGV0ZSBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX2RhaWx5dXJscyB3aGVyZSB0aW1lc3RhbXAgPj0kZnJvbSBhbmQgdGltZXN0YW1wIDw9JHRvIGFuZCB1cmw9JyRwYWdlW2lkXSciKTsKICAgICAgICAgICAkZGItPkV4ZWN1dGUoImRlbGV0ZSBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX2NvbnZlcnNpb25zIHdoZXJlIHRpbWVzdGFtcCA+PSRmcm9tIGFuZCB0aW1lc3RhbXAgPD0kdG8gYW5kIHVybD0nJHBhZ2VbaWRdJyIpOyAgICAKICAgICAgICB9IGVsc2UgaWYgKCRmbGRuYW1lPT0iaXBudW1iZXIiKSB7CiAgICAgICAgICAgICRxID0gQCRkYi0+RXhlY3V0ZSgic2VsZWN0IGlkIGZyb20gJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfdmlzaXRvcmlkcyB3aGVyZSBpcG51bWJlcj0nJGZsZHZhbHVlJyIpOwogICAgICAgICAgICB3aGlsZSAoJHBhZ2U9JHEtPkZldGNoUm93KCkpIHsKICAgICAgICAgICAgICAgICRkYi0+RXhlY3V0ZSgiZGVsZXRlIGZyb20gJGVkaXRwcm9maWxlLT50YWJsZW5hbWUgd2hlcmUgdGltZXN0YW1wID49JGZyb20gYW5kIHRpbWVzdGFtcCA8PSR0byBhbmQgdmlzaXRvcmlkPSckcGFnZVtpZF0nIik7CiAgICAgICAgICAgICAgICAkZGItPkV4ZWN1dGUoImRlbGV0ZSBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX2NvbnZlcnNpb25zIHdoZXJlIHRpbWVzdGFtcCA+PSRmcm9tIGFuZCB0aW1lc3RhbXAgPD0kdG8gYW5kIHZpc2l0b3JpZD0nJHBhZ2VbaWRdJyIpOyAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+PGZvbnQgY29sb3I9cmVkPkxhc3QgQWN0aW9uOjwvZm9udD48YnI+PGk+IjsKICAgICAgICBpZiAoJHJlY2FsPT0xKXsgCiAgICAgICAgICAgICRkYi0+RXhlY3V0ZSgiZGVsZXRlIGZyb20gJGVkaXRwcm9maWxlLT50YWJsZW5hbWVfdnBtIHdoZXJlIHRpbWVzdGFtcCA+PSRmcm9tIGFuZCB0aW1lc3RhbXAgPD0kdG8iKTsKICAgICAgICAgICAgJGRiLT5FeGVjdXRlKCJkZWxldGUgZnJvbSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV92cGQgd2hlcmUgdGltZXN0YW1wID49JGZyb20gYW5kIHRpbWVzdGFtcCA8PSR0byIpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8kZGItPkV4ZWN1dGUoImRlbGV0ZSBmcm9tICRlZGl0cHJvZmlsZS0+dGFibGVuYW1lX3NjcmVlbnJlcyB3aGVyZSB0aW1lc3RhbXAgPj0kZnJvbSBhbmQgdGltZXN0YW1wIDw9JHRvIik7CiAgICAgICAgICAgIC8vJGRiLT5FeGVjdXRlKCJkZWxldGUgZnJvbSAkZWRpdHByb2ZpbGUtPnRhYmxlbmFtZV9jb2xvcmRlcHRoIHdoZXJlIHRpbWVzdGFtcCA+PSRmcm9tIGFuZCB0aW1lc3RhbXAgPD0kdG8iKTsKICAgICAgICAgICAgZWNobyAiRGVsZXRlZCAkZmxkbmFtZSAkZmxkdmFsdWUsIHdpbGwgcmVjYWxjdWxhdGUgc3VtbWFyeSB0YWJsZXMgbm93IC4uLiI7CiAgICAgICAgICAgLy9kZWxldGVQcm9maWxlRGF0YSgkZWRpdHByb2ZpbGUtPnByb2ZpbGVuYW1lKTsKICAgICAgICAgICAKICAgICAgICAgICBlY2hvKCI8Zm9ybSBuYW1lPXByb2dyZXNzPiIuX1BST0dSRVNTLiI6PGJyPjxpbnB1dCB0eXBlPXRleHQgbmFtZT1wZXJjIHNpemU9MSB2YWx1ZT1cIjBcIiBjbGFzcz1wYmFyPiUgJm5ic3A7Iik7CiAgICAgICAgICAgZWNobygiPGlucHV0IHR5cGU9dGV4dCBuYW1lPXByb2diYXIgc2l6ZT00NiB2YWx1ZT1cInxcIiBjbGFzcz1wcm9nYmFyPjxQPiIpOwogICAgICAgICAgIGVjaG8oX1NUQVRVUy4iOiA8aW5wdXQgdHlwZT10ZXh0IG5hbWU9cHRleHQgc2l6ZT04NSBjbGFzcz1wYmFyIHZhbHVlPVwic3RhcnRcIiBjbGFzcz1wcm9nYmFyPjxQPiIpOwogICAgICAgICAgIGVjaG8oIjwvZm9ybT4iKTsKICAgICAgICAgICBlY2hvICI8YnI+PGJyPiI7CiAgICAgICAgICAgLy8gZnVuY3Rpb24gZWNob0NvbnNvbGVTYWZlKCR0eHQpIHsKICAgICAgICAgICAgICAgIC8vIGVjaG8gJHR4dDsgICAKICAgICAgICAgICAvLyB9CiAgICAgICAgICAgJHByb2ZpbGUgPSBuZXcgU2l0ZVByb2ZpbGUoJGN1cnByb2ZpbGVuYW1lKTsKICAgICAgICAgICAkY29uZj0kY3VycHJvZmlsZW5hbWU7CiAgICAgICAgICAgJG9yaXN0PSRmcm9tOwogICAgICAgICAgID8+CiAgICAgICAgICAgIDxzY3JpcHQ+CiAgICAgICAgICAgIGZ1bmN0aW9uIHBiYXIocCkgewogICAgICAgICAgICAgICAgc2VsZi5kb2N1bWVudC5mb3Jtcy5wcm9ncmVzcy5wZXJjLnZhbHVlPXA7CiAgICAgICAgICAgICAgICBzZWxmLmRvY3VtZW50LmZvcm1zLnByb2dyZXNzLnByb2diYXIudmFsdWU9c2VsZi5kb2N1bWVudC5mb3Jtcy5wcm9ncmVzcy5wcm9nYmFyLnZhbHVlKyd8JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBwc3RhdHVzKHApIHsKICAgICAgICAgICAgICAgIHNlbGYuZG9jdW1lbnQuZm9ybXMucHJvZ3Jlc3MucHRleHQudmFsdWU9cDsKICAgICAgICAgICAgfQogICAgICAgICAgICA8L3NjcmlwdD4KICAgICAgICAgICAgPD9waHAKICAgICAgICAgICBpbmNsdWRlICJ1cGRhdGVfc3VtbWFyaWVzLnBocCI7CiAgICAgICAgICAgZWNobyAiPC9kaXY+IjsKICAgICAgIAogICAgICAgfQogICAgICAgZWNobyBfSUZfWU9VX1dBTlRfVE9fS0VFUC4iIDxiPiRmbGR2YWx1ZTwvYj4gIi5fT1VUX09GX0ZVVFVSRV9TVEFUUy4iICI7CiAgICAgICBpZiAoJGZsZG5hbWU9PSJwYWdlIikgewogICAgICAgICAgICBlY2hvIF9TS0lQX0ZJTEVTLiIgIjsKICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVjaG8gX1NLSVBfSVBfTlVNQkVSUy4iICI7ICAKICAgICAgIH0KICAgICAgIGVjaG8gX0ZJRUxEX09OX1RIRV9EQVRBX0NPTExFQ1RJT05fVEFCX0lOX1lPVVIuIiAkY3VycHJvZmlsZW5hbWUgIi5fUFJPRklMRV9TRVRUSU5HUy4iLjwvaT48L2Rpdj48aHIgbm9zaGFkZSBzaXplPTE+PGJyPiI7ICAgCiAgICAgIH0KfQoKaWYgKCRkZWw9PTExKSB7IC8vIHRoaXMganVzdCBkb2VzIHVwZGF0ZV9zdW1tYXJpZXMgd2l0aG91dCBhZGRpbmcgYW55IG5ldyB0cmFmZmljIGZyb20gdGhlIGxvZyBmaWxlcwogICAgaWYgKCRlZGl0cHJvZmlsZS0+cHJvZmlsZWxvYWRlZCkgewogICAgICAgCiAgICAgICAgZWNobyAiPGRpdiBjbGFzcz1cImluZGVudGJvZHlcIj48Zm9udCBjb2xvcj1yZWQ+Ii5fTEFTVF9BQ1RJT04uIjo8L2ZvbnQ+PGJyPiI7IAogICAgICAgICAgICAKICAgICAgICAgICBlY2hvICI8aT4iLl9VUERBVEVfU1VNTUFSSUVTX1dPVVRfQ0hFQ0tJTkdfTkVXX0RBVEEuIi4uLjwvaT4iOwogICAgICAgICAgIAogICAgICAgICAgIGVjaG8oIjxmb3JtIG5hbWU9cHJvZ3Jlc3M+Ii5fUFJPR1JFU1MuIjo8YnI+PGlucHV0IHR5cGU9dGV4dCBuYW1lPXBlcmMgc2l6ZT0xIHZhbHVlPVwiMFwiIGNsYXNzPXBiYXI+JSAmbmJzcDsiKTsKICAgICAgICAgICBlY2hvKCI8aW5wdXQgdHlwZT10ZXh0IG5hbWU9cHJvZ2JhciBzaXplPTQ2IHZhbHVlPVwifFwiIGNsYXNzPXByb2diYXI+PFA+Iik7CiAgICAgICAgICAgZWNobyhfU1RBVFVTLiI6IDxpbnB1dCB0eXBlPXRleHQgbmFtZT1wdGV4dCBzaXplPTg1IGNsYXNzPXBiYXIgdmFsdWU9XCJzdGFydFwiIGNsYXNzPXByb2diYXI+PFA+Iik7CiAgICAgICAgICAgZWNobygiPC9mb3JtPiIpOwogICAgICAgICAgIGVjaG8gIjxicj48YnI+IjsKICAgICAgICAgICAvLyBmdW5jdGlvbiBlY2hvQ29uc29sZVNhZmUoJHR4dCkgewogICAgICAgICAgICAgICAgLy8gZWNobyAkdHh0OyAgIAogICAgICAgICAgIC8vIH0KICAgICAgICAgICAkcHJvZmlsZSA9IG5ldyBTaXRlUHJvZmlsZSgkY3VycHJvZmlsZW5hbWUpOwogICAgICAgICAgICRjb25mPSRjdXJwcm9maWxlbmFtZTsKICAgICAgICAgICAvLyRvcmlzdD0kZnJvbTsKICAgICAgICAgICA/PgogICAgICAgICAgICA8c2NyaXB0PgogICAgICAgICAgICBmdW5jdGlvbiBwYmFyKHApIHsKICAgICAgICAgICAgICAgIHNlbGYuZG9jdW1lbnQuZm9ybXMucHJvZ3Jlc3MucGVyYy52YWx1ZT1wOwogICAgICAgICAgICAgICAgc2VsZi5kb2N1bWVudC5mb3Jtcy5wcm9ncmVzcy5wcm9nYmFyLnZhbHVlPXNlbGYuZG9jdW1lbnQuZm9ybXMucHJvZ3Jlc3MucHJvZ2Jhci52YWx1ZSsnfCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcHN0YXR1cyhwKSB7CiAgICAgICAgICAgICAgICBzZWxmLmRvY3VtZW50LmZvcm1zLnByb2dyZXNzLnB0ZXh0LnZhbHVlPXA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zY3JpcHQ+CiAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgaW5jbHVkZSAidXBkYXRlX3N1bW1hcmllcy5waHAiOwogICAgICB9Cn0KCmlmICgkdXBkYXRlX2NvdW50cmllcz09MSkgewogICAgaWYgKCRlZGl0cHJvZmlsZS0+cHJvZmlsZWxvYWRlZCkgewogICAgICAgIGlmICghJHZhbGlkVXNlclJlcXVpcmVkIHx8IEAkc2Vzc2lvbi0+Y2FuVXBkYXRlTG9ncygpKSB7CiAgICAgICAgICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+PGgzPlVwZGF0ZSBHZW9ncmFwaGljIExvY2F0aW9uIGluZm9ybWF0aW9uIGZvciAnJGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZSc8L2gzPiI7CiAgICAgICAgICAgIGVjaG8gIjxwPllvdSBjYW4gdXNlIHRoaXMgdG9vbCBpZiB5b3UgaGF2ZSB1cGRhdGVkIChvciBqdXN0IGluc3RhbGxlZCkgdGhlIEdlbyBMb2NhdGlvbiBkYXRhYmFzZSBhbmQgd2FudCB0byB1cGRhdGUgY291bnRyeSBpbmZvcm1hdGlvbiBvbiByZWNvcmRzIGFscmVhZHkgc3RvcmVkIGluIHlvdXIgTG9nYWhvbGljIGRhdGFiYXNlIGZvciB0aGlzIHByb2ZpbGUuPC9wPiI7CiAgICAgICAgICAgIGVjaG8gIjxQPlRoZSBkYXRlIHJhbmdlIHdpbGwgYWZmZWN0IHdoaWNoIHZpc2l0b3JzIGFyZSBjaGVja2VkIChvbmx5IHZpc2l0b3JpZCdzIDxlbT5maXJzdCBjcmVhdGVkPC9lbT4gd2l0aGluIHRoZSBkYXRlIHJhbmdlKSBhbmQgd2hpY2ggcmVjb3JkcyB3aWxsIGJlIHVwZGF0ZWQgKG9ubHkgaGl0cyB3aXRoaW4gdGhlIGRhdGUgcmFuZ2UpLjwvUD4iOwogICAgICAgICAgICBlY2hvICI8cD48Yj5TZWxlY3QgdGhlIGRhdGUgcmFuZ2UgeW91IHdhbnQgdG8gdXBkYXRlIGdlb2dyYXBoaWMgaW5mb3JtYXRpb24gZm9yOjwvYj48L3A+IjsKICAgICAgICAgICAgZWNobyAiPGZvcm0gbWV0aG9kPWdldCBhY3Rpb249XCJwcm9maWxlcy5waHBcIj4iOwogICAgICAgICAgICBlY2hvICI8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1cInVwZGF0ZV9jb3VudHJpZXNcIiB2YWx1ZT0yPiI7CiAgICAgICAgICAgICRkYXRlcmFuZ2UgPSBHZXRNYXhEYXRlUmFuZ2UoJGVkaXRwcm9maWxlKTsKICAgICAgICAgICAgRGF0ZVNlbGVjdG9yKCRkYXRlcmFuZ2VbJ2Zyb20nXSwkZGF0ZXJhbmdlWyd0byddKTsKICAgICAgICAgICAgZWNobyAiPGlucHV0IHR5cGU9aGlkZGVuIG5hbWU9ZWRpdGNvbmYgdmFsdWU9XCIkY3VycHJvZmlsZW5hbWVcIj4iOwogICAgICAgICAgICBlY2hvICI8aW5wdXQgdHlwZT1zdWJtaXQgbmFtZT1zdWJtaXQgdmFsdWU9XCIiLl9VUERBVEVfTk9XLiJcIiBzdHlsZT1cIm1hcmdpbi10b3A6NXB4O2ZvbnQtc2l6ZToxNHB4O1wiPiI7CiAgICAgICAgICAgIGVjaG8gIjwvZGl2PjwvYm9keT48L2h0bWw+IjsKICAgICAgICAgICAgZXhpdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+IjsKICAgICAgICAgICAgZWNob1dhcm5pbmcoX1NPUlJZX05PX1BFUk1JU1NJT05TKTsKICAgICAgICAgICAgZWNobyAiPFA+Jm5ic3A7PC9QPjwvZGl2PiI7CiAgICAgICAgfQogICAgfSAgICAgICAgCn0KaWYgKCR1cGRhdGVfY291bnRyaWVzPT0yKSB7CiAgICBpZiAoJGVkaXRwcm9maWxlLT5wcm9maWxlbG9hZGVkKSB7CiAgICAgICAgaWYgKCEkdmFsaWRVc2VyUmVxdWlyZWQgfHwgQCRzZXNzaW9uLT5jYW5VcGRhdGVMb2dzKCkpIHsKICAgICAgICAgICAgJHByb2ZpbGU9JGVkaXRwcm9maWxlOwogICAgICAgICAgICBpbmNsdWRlICJpbmNsdWRlcy91cGRhdGVfY291bnRyaWVzLnBocCI7CiAgICAgICAgICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+IjsKICAgICAgICAgICAgJHVjID0gbmV3IFVwZGF0ZUNvdW50cmllcygpOwogICAgICAgICAgICAkdWMtPkRpc3BsYXlQcm9ncmVzcygpOwogICAgICAgICAgICAkdWMtPlVwZGF0ZVJhbmdlKCRmcm9tLCR0byk7CiAgICAgICAgICAgIGVjaG8gIjwvZGl2PjwvYm9keT48L2h0bWw+IjsKICAgICAgICAgICAgZXhpdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+IjsKICAgICAgICAgICAgZWNob1dhcm5pbmcoX1NPUlJZX05PX1BFUk1JU1NJT05TKTsKICAgICAgICAgICAgZWNobyAiPFA+Jm5ic3A7PC9QPjwvZGl2PiI7CiAgICAgICAgfQogICAgfSAgICAgICAgCn0KCgppZiAoIWlzc2V0KCRiYWNrdXApKSB7CgkkYmFja3VwPTA7IAp9CmlmICgkYmFja3VwPT0xKSB7CgllY2hvICI8ZGl2IGNsYXNzPVwiaW5kZW50Ym9keVwiPjxiPiIuX0JBQ0tVUF9FWFBPUlRfREFURV9SQU5HRV9GUk9NLiIgPGZvbnQgY29sb3I9cmVkPiRjdXJwcm9maWxlbmFtZTwvZm9udD48L2I+PFA+IjsKCWVjaG8gIjxmb3JtIG1ldGhvZD1nZXQgYWN0aW9uPVwicHJvZmlsZXMucGhwXCI+IjsKCWVjaG8gIjx0YWJsZSB3aWR0aD00NTAgY2xhc3M9c21hbGxib3JkZXI+PHRyPjx0ZCBjbGFzcz1zbWFsbD4iLl9ZT1VfQ0FOX0VYUE9SVF9EQVRBX0ZST01fVEFCTEUuIiAoJGVkaXRwcm9maWxlLT50YWJsZW5hbWUpICIuX0lOX09SREVSX1RPX0JBQ0tVUC4iPC90ZD48L3RyPjwvdGFibGU+PFA+IjsKCWVjaG8gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWJhY2t1cCB2YWx1ZT0yPiI7CglEYXRlU2VsZWN0b3IoJGZyb20sJHRvKTsKCWVjaG8gIjxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPWVkaXRjb25mIHZhbHVlPVwiJGN1cnByb2ZpbGVuYW1lXCI+IjsKICAgIGVjaG8gIjxQPiIuX0ZJTEVfRk9STUFULiI6IDxzZWxlY3QgbmFtZT1cIm1vZGVcIj48b3B0aW9uIHZhbHVlPVwibG9nZmlsZVwiIHNlbGVjdGVkPiAiLl9BUEFDSEVfQ09NQklORURfTE9HX0ZJTEVfRk9STUFULiIgPG9wdGlvbiB2YWx1ZT1cImNzdlwiPiAiLl9DU1ZfRk9STUFULiI8L3NlbGVjdD48L3A+IjsgCgllY2hvICI8UD48aW5wdXQgdHlwZT1zdWJtaXQgbmFtZT1zdWJtaXQgdmFsdWU9XCJEb3dubG9hZCBCYWNrdXAgRmlsZVwiPjwvZGl2PiI7CiAgICBlY2hvICI8L2JvZHk+PC9odG1sPiI7CglleGl0KCk7Cn0KCmlmIChpc3NldCgkX1JFUVVFU1RbImdsb2JhbHN0YXRzIl0pPT0ieWVzIikgeyAKICAgIGVjaG8gIjxkaXYgY2xhc3M9J2luZGVudGJvZHknPiZuYnNwOzxicj4iOwogICAgaW5jbHVkZSAiaW5jbHVkZXMvZ2xvYmFsc3RhdHMucGhwIjsgICAgCiAgICBlY2hvICI8L2Rpdj48L2JvZHk+PC9odG1sPiI7CiAgICBleGl0KCk7Cn0KaWYoaXNzZXQoJHJlc3RvcmVEZWZhdWx0RGFzaGJvYXJkKSl7CgkkZWRpdHByb2ZpbGUtPnNldERlZmF1bHREYXNoYm9hcmQoKTsKCWVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+IjsKCWVjaG8gX1lPVVJfREVGQVVMVF9EQVNIQk9BUkRfSEFTX0JFRU5fUkVTVE9SRUQ7CgllY2hvICI8L2Rpdj4iOwp9CmlmKGlzc2V0KCR1cGRhdGVfbWV0aG9kKSkgewoJaWYoaXNzZXQoJHNldF91cGRhdGVfcHJlZmVyZW5jZSkpIHsKCQlpZigkc2V0X3VwZGF0ZV9wcmVmZXJlbmNlID09ICdwZXJsJykgewoJCQkkc2V0X3VwZGF0ZV9wcmVmZXJlbmNlID0gJ3BlcmwnOwoJCX0gZWxzZSB7CgkJCSRzZXRfdXBkYXRlX3ByZWZlcmVuY2UgPSAncmVndWxhcic7CgkJfQoJCXNldFByb2ZpbGVEYXRhKCRwcm9maWxlLT5wcm9maWxlbmFtZSwgInskcHJvZmlsZS0+cHJvZmlsZW5hbWV9LnVwZGF0ZVByZWZlcmVuY2UiLCAkc2V0X3VwZGF0ZV9wcmVmZXJlbmNlKTsKCQkkZGItPlF1ZXJ5KCJERUxFVEUgZnJvbSAiLlRCTF9HTE9CQUxfU0VUVElOR1MuIiBXSEVSRSBgTmFtZWAgPSAnY2FuRG9QZXJsVXBkYXRlJyIpOwoJCQoJCWVjaG8gIjxkaXYgY2xhc3M9XCJpbmRlbnRib2R5XCI+Ii5zdHJfcmVwbGFjZSgiJXMiLCAkc2V0X3VwZGF0ZV9wcmVmZXJlbmNlLCBfVVBEQVRFX01FVEhPRF9IQVNfQkVFTl9TRVRfVE8pLiI8L2Rpdj4iOwoJfSBlbHNlIHsKCQlpbmNsdWRlX29uY2UoImNvbXBvbmVudHMvaW1wb3J0L2ltcG9ydC5waHAiKTsKCQkkaW1wb3J0Q2xhc3MgPSBuZXcgSW1wb3J0KCk7CgkJCgkJZWNobyAiPGRpdiBzdHlsZT0nbWFyZ2luOiAwIDAgMCAzNXB4OyB3aWR0aDogNDAwcHg7Jz4iOwoJCS8vICRwZXJsY2hlY2sgPSAkaW1wb3J0Q2xhc3MtPmF2YWlsYWJsZUNoZWNrKHRydWUpOwoJCSRwZXJsYWJsZSA9ICRpbXBvcnRDbGFzcy0+YXZhaWxhYmxlQ2hlY2soKTsKCQkKCQlpZigkcGVybGFibGVbJ2hhc0Vycm9yJ10gPT0gdHJ1ZSkgewoJCQkvLyBlY2hvICJZb3UgY2FuJ3QgdXBkYXRlIHlvdXIgc3RhdGlzdGljcyB3aXRoIFBlcmwuPGJyLz5Gb2xsb3cgdGhlIDxhIGhyZWY9J2h0dHA6Ly93d3cubG9nYWhvbGljLmNvbS9tYW51YWwvTG9nYWhvbGljTWFudWFsL01ha2luZ0xvZ2Fob2xpY1JlYWR5Rm9yUGVybFVwZGF0ZXMnPmluc3RydWN0aW9uczwvYT4gaW4gdGhlIExvZ2Fob2xpYyBNYW51YWwgaWYgeW91IGRlc2lyZSB0aGUgUGVybCBtZXRob2QuIjsKCQkJZWNobyAiPGgzPiIuX1lPVVJfTUFDSElORV9JU19OT1RfQUJMRV9UT19VU0VfUEVSTC4iPC9oMz4iOwoJCQkKCQkJdW5zZXQoJHBlcmxhYmxlWydoYXNFcnJvciddKTsKCQkJCgkJCWZvcmVhY2goJHBlcmxhYmxlIGFzICRrZXkgPT4gJHBlcmx0ZXN0KSB7CgkJCQllY2hvICRwZXJsdGVzdC4iPGJyLz4iOwoJCQl9CgkJCQoJCQllY2hvICI8cD4iLnN0cl9yZXBsYWNlKCIlcyIsICI8YSBocmVmPSdodHRwOi8vd3d3LmxvZ2Fob2xpYy5jb20vbWFudWFsL0xvZ2Fob2xpY01hbnVhbC9VcGRhdGVMb2dhaG9saWNTdGF0c1VzaW5nUGVybCcgdGFyZ2V0PSdfYmxhbmsnPnR1dG9yaWFsPC9hPiIsIF9WSVNJVF9QRVJMX0lOU1RBTExfVFVUT1JJQUwpLiI8L3A+PGJyLz4iOwoJCQllY2hvICI8YSBzdHlsZT0nYmFja2dyb3VuZDogbm9uZSByZXBlYXQgc2Nyb2xsIDAgMCAjMTk3MEI0OyBib3JkZXItcmFkaXVzOiA0cHggNHB4IDRweCA0cHg7IGNvbG9yOiAjRkZGRkZGOyBwYWRkaW5nOiA1cHggMTBweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOycgaHJlZj0neyRfU0VSVkVSWydSRVFVRVNUX1VSSSddfSc+Q2hlY2sgYWdhaW48L2E+IjsKCQl9IGVsc2UgewoJCQllY2hvICI8aDM+Ii5fU0VUX1lPVVJfVVBEQVRFX01FVEhPRF9QUkVGRVJFTkNFLiI8L2gzPiI7CgkJCWVjaG8gIjxwIHN0eWxlPSdtYXJnaW4tYm90dG9tOiAyNHB4Oyc+IjsKCQkJCWVjaG8gX1dPVUxEX1lPVV9MSUtFX1RPX1RSWV9QRVJMX1VQREFURS4iPGJyLz4iOwoJCQllY2hvICI8L3A+IjsKCQkJZWNobyAiPGEgc3R5bGU9J2JhY2tncm91bmQtY29sb3I6ICMzMzMzMzM7IGJvcmRlci1yYWRpdXM6IDRweCA0cHggNHB4IDRweDsgY29sb3I6ICNGRkZGRkY7IHBhZGRpbmc6IDVweCAxMHB4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7JyBocmVmPSdwcm9maWxlcy5waHA/Y29uZj17JGN1cnByb2ZpbGVuYW1lfSZ1cGRhdGVfbWV0aG9kPTEmc2V0X3VwZGF0ZV9wcmVmZXJlbmNlPXJlZ3VsYXInPiIuX05PX1VTRV9SRUdVTEFSX1VQREFURS4iPC9hPiI7CgkJCWVjaG8gIjxhIHN0eWxlPSdtYXJnaW4tbGVmdDogMjVweDsgYmFja2dyb3VuZDogbm9uZSByZXBlYXQgc2Nyb2xsIDAgMCAjMTk3MEI0OyBib3JkZXItcmFkaXVzOiA0cHggNHB4IDRweCA0cHg7IGNvbG9yOiAjRkZGRkZGOyBwYWRkaW5nOiA1cHggMTBweDsgdGV4dC1kZWNvcmF0aW9uOiBub25lOycgaHJlZj0ncHJvZmlsZXMucGhwP2NvbmY9eyRjdXJwcm9maWxlbmFtZX0mdXBkYXRlX21ldGhvZD0xJnNldF91cGRhdGVfcHJlZmVyZW5jZT1wZXJsJz4iLl9ZRVNfVVNFX1BFUkxfVVBEQVRFLiI8L2E+IjsKCQl9CgkJZWNobyAiPC9kaXY+IjsKCQlleGl0OwoJfQp9CgppZiAoIWlzc2V0KCRlZGl0KSAmJiAoIWlzc2V0KCRuZXcpKSkgewoJIAogICAgLy8gbGlzdCBhbGwgcHJvZmlsZXMKCQogICAgIGlmICgkc2F2ZWQhPSIiKSB7CgkJCWVjaG8gIjxwIGNsYXNzPVwiaW5kZW50Ym9keVwiPjxmb250IGNvbG9yPXJlZD4iLl9MQVNUX0FDVElPTi4iOjwvZm9udD48YnI+PGk+PGI+JGVkaXRwcm9maWxlLT5wcm9maWxlbmFtZTwvYj4gIi4kc2F2ZWQuIjwvaT48L3A+PGhyIG5vc2hhZGUgc2l6ZT0xPjxicj4iOwoJIH0KCSA/PgoJIDxkaXYgY2xhc3M9aW5kZW50Ym9keT4KICAgIDxzY3JpcHQgbGFuZ3VhZ2U9ImphdmFzY3JpcHQiIHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICBmdW5jdGlvbiBwcm93T3ZlckVmZmVjdChvYmplY3QpIHsKCSAgICBpZiAob2JqZWN0LmNsYXNzTmFtZSA9PSAncHJvZmlsZXJvdycpIG9iamVjdC5jbGFzc05hbWUgPSAncHJvZmlsZXJvd2hpZ2hsaWdodCc7CiAgICB9CgogICAgZnVuY3Rpb24gcHJvd091dEVmZmVjdChvYmplY3QpIHsKCSAgICBpZiAob2JqZWN0LmNsYXNzTmFtZSA9PSAncHJvZmlsZXJvd2hpZ2hsaWdodCcpIG9iamVjdC5jbGFzc05hbWUgPSAncHJvZmlsZXJvdyc7CiAgICB9CiAgICA8L3NjcmlwdD4KICAgIDw/cGhwCiAgICAgICAgCiAgICAvLyBzZWUgaG93IG1hbnkgcHJvZmlsZXMgdGhlcmUgYXJlIGluIHRvdGFsLCBpZiBpdCdzIG1vcmUgdGhhbiA1IHByaW50IGEgU0VBUkNIIEJPWAogICAgJHF1ZXJ5ID0gIlNlbGVjdCBjb3VudCgqKSBmcm9tICIuVEJMX1BST0ZJTEVTLiI7IjsKICAgICRyZXN1bHQgPSAkZGItPkV4ZWN1dGUoJHF1ZXJ5KSBvciBkaWUoX0NPVUxETlRfUVVFUllfUFJPRklMRVMuIiAiIC4gJGRiLT5FcnJvck1zZygpKTsKICAgICRyZXN1bHQgPSAkcmVzdWx0LT5GZXRjaFJvdygpOyAKICAgICRudW1wcm9maWxlcz0kcmVzdWx0WzBdOwoJCglpZiAoKCR2YWxpZFVzZXJSZXF1aXJlZCkgJiYgKCEkc2Vzc2lvbi0+aXNBZG1pbigpKSkgewoJCWlmKCFpc3NldCgkdmFsaWRwcm9maWxlcykpeyAkdmFsaWRwcm9maWxlcyA9ICcnOyB9CgkJCgkJJHF1ZXJ5ID0gIlNFTEVDVCBDT1VOVCgqKSBGUk9NICIuVEJMX1BST0ZJTEVTLiIgV0hFUkUgcHJvZmlsZW5hbWUgSU4gKFwieyR2YWxpZHByb2ZpbGVzfVwiKSI7CgkJJHJlc3VsdCA9ICRkYi0+RXhlY3V0ZSgkcXVlcnkpIG9yIGRpZShfQ09VTEROVF9RVUVSWV9QUk9GSUxFUy4iICIgLiAkZGItPkVycm9yTXNnKCkpOwoJCSRhbW91bnRPZlJpZ2h0ZnVsUHJvZmlsZXMgPSAkcmVzdWx0LT5GZXRjaFJvdygpOwoJCSRhbW91bnRPZlJpZ2h0ZnVsUHJvZmlsZXMgPSAkYW1vdW50T2ZSaWdodGZ1bFByb2ZpbGVzWzBdOwoJfSBlbHNlIHsKCQkkYW1vdW50T2ZSaWdodGZ1bFByb2ZpbGVzID0gJG51bXByb2ZpbGVzOwoJfQoJCiAgICBpZiAoJGFtb3VudE9mUmlnaHRmdWxQcm9maWxlcyA+IDUpIHsKICAgICAgICAvLyBpZiAoKCR2YWxpZFVzZXJSZXF1aXJlZCkgJiYgKCEkc2Vzc2lvbi0+aXNBZG1pbigpKSkgewogICAgICAgICAgICAvLyB5b3UgaGF2ZSB0byBiZSBhZG1pbiB0byBzZWUgdGhlIHNlYXJjaCBib3gKICAgICAgICAvLyB9IGVsc2UgeyAgICAgICAgICAgICAKICAgICAgICA/PgogICAgICAgICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249InByb2ZpbGVzLnBocDw/cGhwIGVjaG8gIWVtcHR5KCRfR0VUWydudW1fcHAnXSkgPyAiP251bV9wcD17JF9HRVRbJ251bV9wcCddfSIgOiAiIjsgPz4iPgogICAgICAgICAgU2VhcmNoIHByb2ZpbGVzIG1hdGNoaW5nOiA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ic2VhcmNoIiB2YWx1ZT0iPD9waHAgZWNobyBAJHNlYXJjaDsgPz4iPiAKICAgICAgICAgIGluIGZpZWxkOiAKICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJzZmllbGQiPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icHJvZmlsZW5hbWUiIDw/cGhwIGlmIChAJHNmaWVsZD09InByb2ZpbGVuYW1lIikgeyBlY2hvICJzZWxlY3RlZCI7IH0gPz4+IDw/cGhwIGVjaG8gX1BST0ZJTEVfTkFNRTs/PgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY29uZmRvbWFpbiIgPD9waHAgaWYgKEAkc2ZpZWxkPT0iY29uZmRvbWFpbiIpIHsgZWNobyAic2VsZWN0ZWQiOyB9ID8+PiA8P3BocCBlY2hvIF9ET01BSU5fTkFNRTs/PgogICAgICAgICAgICA8L3NlbGVjdD4gICAgIAogICAgICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iU2VhcmNoIj4gICAgCiAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgICA8YnI+CiAgICAgICAgICA8P3BocAogICAgICAgIC8vIH0KICAgIH0KICAgIAogICAgZWNobyAiPGRpdiBzdHlsZT1cIndpZHRoOjYwMHB4O1wiPiI7CiAgICBpZiAoISR2YWxpZFVzZXJSZXF1aXJlZCB8fCAkc2Vzc2lvbi0+aXNBZG1pbigpIHx8ICRzZXNzaW9uLT5jYW5BZGRQcm9maWxlcygpKSB7CiAgICAgICAgZWNobyAiPGRpdiBzdHlsZT1cImZsb2F0OmxlZnQ7bGluZS1oZWlnaHQ6MTZweDtwYWRkaW5nLXJpZ2h0OjIwcHg7bWFyZ2luLWJvdHRvbTo2cHg7XCI+IjsKICAgICAgICBpZiAoKCFkZWZpbmVkKCJfTElNSVRfUFJPRklMRVMiKSkgfHwgKF9MSU1JVF9QUk9GSUxFUyA9PSAwKSkgewogICAgICAgICAgICBlY2hvICI8aW1nIHNyYz1cImltYWdlcy9pY29ucy9hZGRfcHJvZmlsZS5naWZcIiB3aWR0aD0xNiBoZWlnaHQ9MTYgYWxpZ249bGVmdCBhbHQ9XCJOZXdcIj4gPGEgaHJlZj1cInByb2ZpbGVzLnBocD9jb25mPW5ld2NuZiZhbXA7bmV3PTFcIj4iLl9DUkVBVEVfTkVXX1BST0ZJTEUuIjwvYT4iOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICgkbnVtcHJvZmlsZXMgPj0gX0xJTUlUX1BST0ZJTEVTKSB7CiAgICAgICAgICAgICAgICBlY2hvICI8aW1nIHNyYz1cImltYWdlcy9pY29ucy9hZGRfcHJvZmlsZS5naWZcIiB3aWR0aD0xNiBoZWlnaHQ9MTYgYWxpZ249bGVmdCBhbHQ9XCJVcGdyYWRlXCI+ICIuX1RPT19NQU5ZX1BST0ZJTEVTX1BMRUFTRV9VUEdSQURFLiIiOyAgICAgIAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWNobyAiPGltZyBzcmM9XCJpbWFnZXMvaWNvbnMvYWRkX3Byb2ZpbGUuZ2lmXCIgd2lkdGg9MTYgaGVpZ2h0PTE2IGFsaWduPWxlZnQgYWx0PVwiTmV3XCI+IDxhIGhyZWY9XCJwcm9maWxlcy5waHA/Y29uZj1uZXdjbmYmYW1wO25ldz0xXCI+Ii5fQ1JFQVRFX05FV19QUk9GSUxFLiI8L2E+IjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlY2hvICI8L2Rpdj4iOyAgICAgICAgICAKICAgIH0KICAgIAoJaWYoJGFtb3VudE9mUmlnaHRmdWxQcm9maWxlcyA+IDEpIHsKCQllY2hvICI8ZGl2IHN0eWxlPVwiZmxvYXQ6bGVmdDtsaW5lLWhlaWdodDoxNnB4O21hcmdpbi1ib3R0b206NnB4O1wiPjxpbWcgc3JjPVwiaW1hZ2VzL2ljb25zL3BpZS5naWZcIiB3aWR0aD0xNiBoZWlnaHQ9MTYgYWxpZ249bGVmdCBhbHQ9XCJOZXdcIj4gPGEgaHJlZj1cInByb2ZpbGVzLnBocD9nbG9iYWxzdGF0cz15ZXNcIj4iLl9HTE9CQUxfU1RBVElTVElDU19PVkVSVklFVy4iPC9hPjwvZGl2PiI7Cgl9CiAgICBlY2hvICI8L2Rpdj4iOyAKCQoJPz4KICAgIAogICAgPHRhYmxlIGNlbGxwYWRkaW5nPTYgY2VsbHNwYWNpbmc9MCBib3JkZXI9MCBzdHlsZT0ibWluLXdpZHRoOjYwMHB4O2NsZWFyOmJvdGg7Ij4KCQk8dHI+PHRkIGNvbHNwYW49NSAgY2xhc3M9dG9wbGluZWJsdWUgYmdjb2xvcj0iI0JCRERGRiI+PGltZyBzcmM9ImltYWdlcy9pY29ucy9wcm9maWxlcy5naWYiIHdpZHRoPTE2IGhlaWdodD0xNiBhbGlnbj1sZWZ0IGFsdD0iPD9waHAgZWNobyBfTUFOQUdFX1BST0ZJTEVTOz8+Ij4gJm5ic3A7Jm5ic3A7PGZvbnQgc2l6ZT0zPjxiPjw/cGhwIGVjaG8gX01BTkFHRV9QUk9GSUxFUzs/PjwvYj48L2ZvbnQ+PC90ZD48L3RyPgoJPD9waHAgICAgICAgCiAgICAKICAgICRxdWVyeSA9ICJTZWxlY3QgcHJvZmlsZW5hbWUsdGFibGVuYW1lLHByb2ZpbGVpZCBmcm9tICIuVEJMX1BST0ZJTEVTOwoJCgkvLyBJZiB3ZSdyZSBsaW1pdGluZyB0aGUgdmlzaWJsZSBwcm9maWxlcywgdGhlbiBwdXQgYSBmaWx0ZXIgb24gdG8gb25seSBwdWxsIHRob3NlIHJlY29yZHMuCglpZiAoKCR2YWxpZFVzZXJSZXF1aXJlZCkgJiYgKCEkc2Vzc2lvbi0+aXNBZG1pbigpKSkgewoJCS8vIENhbid0IHVzZSBpbXBsb2RlIGhlcmUgYmVjYXVzZSB3ZSBuZWVkIHRvIGVzY2FwZSB0aGUgZW50cmllcy4KCQkkdmFsaWRwcm9maWxlcyA9ICIiOwoJCWZvciAoJGkgPSBjb3VudCgkc2Vzc2lvbi0+dXNlcl9wcm9maWxlcyktMTsgJGkgPj0gMDsgJGktLSkgewoJCQlpZiAoJHZhbGlkcHJvZmlsZXMgIT0gIiIpIHsgJHZhbGlkcHJvZmlsZXMgLj0gIlwiLFwiIjsgfQoJCQkkdmFsaWRwcm9maWxlcyAuPSAkZGItPmVzY2FwZSgkc2Vzc2lvbi0+dXNlcl9wcm9maWxlc1skaV0pOwoJCX0KCQkkcXVlcnkgLj0gIiB3aGVyZSBwcm9maWxlbmFtZSBpbiAoXCIkdmFsaWRwcm9maWxlc1wiKSI7Cgl9CglpZiAoQCRzZWFyY2gpIHsKCQlpZihzdHJwb3MoJHF1ZXJ5LCAnd2hlcmUnKSAhPT0gZmFsc2UpIHsKCQkJJHF1ZXJ5IC49ICIgQU5EICRzZmllbGQgTElLRSAnJSRzZWFyY2glJyI7CgkJfSBlbHNlIHsKCQkJJHF1ZXJ5IC49ICIgV0hFUkUgJHNmaWVsZCBMSUtFICclJHNlYXJjaCUnIjsKCQl9CiAgICB9CiAgICAKICAgICRxdWVyeS49IiBvcmRlciBieSBwcm9maWxlbmFtZSI7CgkkaXRlbXNfcGVyX3BhZ2UgPSA1MDsKICAgIGlmIChkZWZpbmVkKCJfTElNSVRfUFJPRklMRVMiKSAhPSAwKSB7CiAgICAgICRxdWVyeS49IiBsaW1pdCAwLCIuX0xJTUlUX1BST0ZJTEVTOwoJICAkbnVtX29mX2l0ZW1zID0gX0xJTUlUX1BST0ZJTEVTOwogICAgfSBlbHNlIHsKCQkvKiBQYWdpbmF0aW9uIGNvbmZpZyBzdGFydHMgaGVyZSAqLwoJCSRudW1fb2ZfaXRlbXMgPSAwOyAjIFRoZSB0b3RhbCBhbW91bnQgb2YgaXRlbXMKCQkkbWF4X2xpbmtzID0gNTsgIyBUaGUgYW1vdW50IG9mIHBhZ2UgbnVtYmVycyB0byBzaG93CgkJCgkJJGNvdW50X3F1ZXJ5ID0gIlNFTEVDVCBDT1VOVCgqKSBBUyBgbWF4X3Byb2ZpbGVzYCBGUk9NICIuVEJMX1BST0ZJTEVTOwoJCWlmICgoJHZhbGlkVXNlclJlcXVpcmVkKSAmJiAoISRzZXNzaW9uLT5pc0FkbWluKCkpKSB7CgkJCS8vIENhbid0IHVzZSBpbXBsb2RlIGhlcmUgYmVjYXVzZSB3ZSBuZWVkIHRvIGVzY2FwZSB0aGUgZW50cmllcy4KCQkJJHZhbGlkcHJvZmlsZXMgPSAiIjsKCQkJZm9yICgkaSA9IGNvdW50KCRzZXNzaW9uLT51c2VyX3Byb2ZpbGVzKS0xOyAkaSA+PSAwOyAkaS0tKSB7CgkJCQlpZiAoJHZhbGlkcHJvZmlsZXMgIT0gIiIpIHsgJHZhbGlkcHJvZmlsZXMgLj0gIlwiLFwiIjsgfQoJCQkJJHZhbGlkcHJvZmlsZXMgLj0gJGRiLT5lc2NhcGUoJHNlc3Npb24tPnVzZXJfcHJvZmlsZXNbJGldKTsKCQkJfQoJCQkkY291bnRfcXVlcnkgLj0gIiBXSEVSRSBwcm9maWxlbmFtZSBJTiAoXCJ7JHZhbGlkcHJvZmlsZXN9XCIpIjsKCQl9CgkJJGFtb3VudF9yZXN1bHQgPSAkZGItPkV4ZWN1dGUoJGNvdW50X3F1ZXJ5KTsKCQkKCQkkbnVtX29mX2l0ZW1zID0gJGFtb3VudF9yZXN1bHQtPkZldGNoUm93KCk7CgkJJG51bV9vZl9pdGVtcyA9ICRudW1fb2ZfaXRlbXNbJ21heF9wcm9maWxlcyddOwoKCQlpZighZW1wdHkoJF9HRVRbJ251bV9wcCddKSkgewoJCQlpZigkX0dFVFsnbnVtX3BwJ10gPT0gJ0FsbCcpIHsKCQkJCSRpdGVtc19wZXJfcGFnZSA9ICRudW1fb2ZfaXRlbXM7CgkJCX0gZWxzZSB7CgkJCQkkaXRlbXNfcGVyX3BhZ2UgPSAkX0dFVFsnbnVtX3BwJ107CgkJCX0KCQl9CQkKCQlpZighZW1wdHkoJF9HRVRbJ3BhZ2VfbnVtJ10pKSB7CgkJCSRwYWdlX251bSA9ICRfR0VUWydwYWdlX251bSddOwoJCX0gZWxzZSB7CgkJCSRwYWdlX251bSA9IDE7CgkJfQoJCQoJCSRxdWVyeSAuPSAiIExJTUlUICIuZmxvb3IoKCRwYWdlX251bSAtIDEpICogJGl0ZW1zX3Blcl9wYWdlKS4iLCAiLiRpdGVtc19wZXJfcGFnZTsKCQkvKiBQYWdpbmF0aW9uIGNvbmZpZyBlbmRzIGhlcmUgKi8KCX0KCQoJCgkkcmVzdWx0ID0gJGRiLT5FeGVjdXRlKCRxdWVyeSkgb3IgZGllKF9DT1VMRE5UX1FVRVJZX1BST0ZJTEVTLiIgIiAuICRkYi0+RXJyb3JNc2coKSk7CiAgICBpZiAoJHJlc3VsdC0+UmVjb3JkQ291bnQoKSA9PSAwKSB7CgkJZWNobyAiPHRyPjx0ZCBjb2xzcGFuPTUgY2xhc3M9XCJwcm9maWxlcm93XCI+Ii5fWU9VX0hBVkVfTk9fQUNUSVZFX1BST0ZJTEVTLiIuPC90ZD48L3RyPiI7Cgl9IGVsc2UgewoJCXdoaWxlICgkcHJvZmlsZV9yb3cgPSAkcmVzdWx0LT5GZXRjaFJvdygpKSB7CgkJCSRwcm9maWxlbmFtZSA9ICRwcm9maWxlX3Jvd1swXTsKICAgICAgICAgICAgJHByb2ZpbGVfdGFibGVuYW1lID0gJHByb2ZpbGVfcm93WzFdOwoJCQlpZiAoJGNvbmY9PSRwcm9maWxlbmFtZSB8fCAkZWRpdGNvbmY9PSRwcm9maWxlbmFtZSkgewoJCQkJJHNlbD0iIDxmb250IGNvbG9yPXJlZD4oIi5fQUNUSVZFLiIpPC9mb250PiI7CgkJCQkkYmdjPSJiZ2NvbG9yPSNDQ0ZGQ0MiOwoJCQkJJGNsYXNzPSIiOwoJCQl9IGVsc2UgewoJCQkJJHNlbD0iIjsKCQkJCSRiZ2M9IiI7CgkJCQkkY2xhc3M9Im9ubW91c2VvdmVyPVwicHJvd092ZXJFZmZlY3QodGhpcylcIiBvbm1vdXNlb3V0PVwicHJvd091dEVmZmVjdCh0aGlzKVwiIjsKCQkJfQoJCQllY2hvICI8dHIgY2xhc3M9XCJwcm9maWxlcm93XCIgJGNsYXNzPjx0ZCAkYmdjIHN0eWxlPVwiZm9udC1zaXplOjEzcHg7XCIgY2xhc3M9XCJkb3RsaW5lMlwiIHRpdGxlPVwieyRwcm9maWxlX3Jvd1syXX1cIj48Yj4kcHJvZmlsZW5hbWU8L2I+ICRzZWw8L3RkPjx0ZCAkYmdjIHN0eWxlPVwiZm9udC1zaXplOjEzcHg7XCIgY2xhc3M9ZG90bGluZTI+PGltZyBzcmM9XCJpbWFnZXMvaWNvbnMvZGF0ZS5naWZcIiB3aWR0aD0xNiBoZWlnaHQ9MTYgYWxpZ249bGVmdCBhbHQ9XCIiLl9WSUVXX1NUQVRTLiJcIj4gPGEgaHJlZj1cImluZGV4LnBocD9jb25mPSRwcm9maWxlbmFtZVwiPiIuX1ZJRVdfU1RBVFMuIjwvYT48L3RkPiI7CgkJCWlmICgoISR2YWxpZFVzZXJSZXF1aXJlZCkgfHwgKCRzZXNzaW9uLT5jYW5VcGRhdGVMb2dzKCkpKSB7CiAgICAgICAgICAgICAgICBlY2hvICI8dGQgJGJnYyBjbGFzcz1kb3RsaW5lMj48aW1nIHNyYz1cImltYWdlcy9pY29ucy91cGRhdGUuZ2lmXCIgd2lkdGg9MTYgaGVpZ2h0PTE2IGFsaWduPWxlZnQgYWx0PVwiIi5fVVBEQVRFX05PVy4iXCI+IDxhIGhyZWY9XCJ1cGRhdGUucGhwP2NvbmY9JHByb2ZpbGVuYW1lXCI+Ii5fVVBEQVRFX05PVy4iPC9hPjwvdGQ+IjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKCEkdmFsaWRVc2VyUmVxdWlyZWQpIHx8ICgkc2Vzc2lvbi0+Y2FuRWRpdFByb2ZpbGVzKCkpKSB7CiAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgJHJxPSBAJGRiLT5FeGVjdXRlKCJzZWxlY3QgY291bnQoKikgZnJvbSAkcHJvZmlsZV90YWJsZW5hbWUiKTsKICAgICAgICAgICAgICAgICRyZWNzID0gQCRycS0+RmV0Y2hSb3coKTsKICAgICAgICAgICAgICAgICRyZWNzID0gbnVtYmVyX2Zvcm1hdCgkcmVjc1swXSwgMCwgJy4nLCAnJyk7IAogICAgICAgICAgICAgICAgZWNobyAiPHRkICRiZ2MgY2xhc3M9ZG90bGluZTI+PGltZyBzcmM9XCJpbWFnZXMvaWNvbnMvZWRpdC5naWZcIiB3aWR0aD0xNiBoZWlnaHQ9MTYgYWxpZ249bGVmdCBhbHQ9XCJFZGl0XCI+PGEgaHJlZj1cInByb2ZpbGVzLnBocD9lZGl0Y29uZj0kcHJvZmlsZW5hbWUmYW1wO2VkaXQ9MVwiPiIuX0VESVRfUFJPRklMRS4iPC9hPjwvdGQ+PHRkICRiZ2MgY2xhc3M9ZG90bGluZTIgdGl0bGU9XCJUaGlzIHByb2ZpbGUgY29udGFpbnMgJHJlY3MgZGF0YSByZWNvcmRzXCI+IDxpbWcgc3JjPVwiaW1hZ2VzL2ljb25zL2RlbGV0ZS5naWZcIiB3aWR0aD0xNiBoZWlnaHQ9MTYgYWxpZ249bGVmdCBhbHQ9XCJEZWxldGVcIj48YSBocmVmPVwicHJvZmlsZXMucGhwP2VkaXRjb25mPSRwcm9maWxlbmFtZSZhbXA7ZGVsPTFcIj4iLl9NQUlOVEVOQU5DRS4iPC9hPjwvdGQ+PC90cj4iOwogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIGVjaG8gIjx0ZCAkYmdjIGNsYXNzPWRvdGxpbmUyPjxpbWcgc3JjPVwiaW1hZ2VzL2ljb25zL2VkaXQuZ2lmXCIgd2lkdGg9MTYgaGVpZ2h0PTE2IGFsaWduPWxlZnQgYWx0PVwiRWRpdFwiPjxhIGhyZWY9XCJwcm9maWxlcy5waHA/ZWRpdGNvbmY9JHByb2ZpbGVuYW1lJmFtcDtlZGl0PTFcIj4iLl9FRElUX1BST0ZJTEUuIjwvYT48L3RkPiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCghJHZhbGlkVXNlclJlcXVpcmVkKSB8fCAoJHNlc3Npb24tPmNhbkVkaXRQcm9maWxlcygpKSkgewogICAgICAgICAgICAgICAgZWNobyAiPHRkICRiZ2MgY2xhc3M9ZG90bGluZTI+IDxpbWcgc3JjPVwiaW1hZ2VzL2ljb25zL2RlbGV0ZS5naWZcIiB3aWR0aD0xNiBoZWlnaHQ9MTYgYWxpZ249bGVmdCBhbHQ9XCJEZWxldGVcIj48YSBocmVmPVwicHJvZmlsZXMucGhwP2VkaXRjb25mPSRwcm9maWxlbmFtZSZhbXA7ZGVsPTFcIj4iLl9NQUlOVEVOQU5DRS4iPC9hPjwvdGQ+PC90cj4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWNobyAiPC90cj4iOyAgIAogICAgICAgICAgICB9CgkJfQoJCQoJCWlmICgkbnVtX29mX2l0ZW1zID4gJGl0ZW1zX3Blcl9wYWdlKSB7CgkJCWVjaG8gIjx0cj48dGQgY2VsbHNwYWNpbmc9JzAnIGNlbGxwYWRkaW5nPScwJyBjb2xzcGFuPSc1Jz4iOwkJCQoJCQkJaWYgKGRlZmluZWQoIl9MSU1JVF9QUk9GSUxFUyIpID09IDApIHsKCQkJCQllY2hvICI8ZGl2IGNsYXNzPSdwcm9maWxlX3BhZ2luYXRpb24nPiI7CgkJCQkJCWlmKGNlaWwoJG51bV9vZl9pdGVtcy8kaXRlbXNfcGVyX3BhZ2UpID4gMSkgewoJCQkJCQkJZWNobyBwYWdpbmF0aW9uKCRudW1fb2ZfaXRlbXMsICRpdGVtc19wZXJfcGFnZSwgJHBhZ2VfbnVtLCAkbWF4X2xpbmtzKTsKCQkJCQkJfQoJCQkJCQlpZighZW1wdHkoJF9HRVRbJ3BhZ2VfbnVtJ10pKSB7CgkJCQkJCQkkdXJsX2V4dGVuc2lvbiA9ICI/cGFnZV9udW09MSYiOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJJHVybF9leHRlbnNpb24gPSAiPyI7CgkJCQkJCX0KCQkJCQkJaWYoIWVtcHR5KCRfUkVRVUVTVFsnc2VhcmNoJ10pKSB7CgkJCQkJCQlpZigkdXJsX2V4dGVuc2lvbiA9PSAnPycpIHsKCQkJCQkJCQkkdXJsX2V4dGVuc2lvbiAuPSAic2VhcmNoPXskX1JFUVVFU1RbJ3NlYXJjaCddfSZzZmllbGQ9eyRfUkVRVUVTVFsnc2ZpZWxkJ119JiI7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCSR1cmxfZXh0ZW5zaW9uIC49ICImc2VhcmNoPXskX1JFUVVFU1RbJ3NlYXJjaCddfSZzZmllbGQ9eyRfUkVRVUVTVFsnc2ZpZWxkJ119IjsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllY2hvICI8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7ICQoXCIjbnVtX3BwXCIpLmNoYW5nZShmdW5jdGlvbigpIHsgd2luZG93LmxvY2F0aW9uID0gXCJ7JF9TRVJWRVJbJ1BIUF9TRUxGJ119eyR1cmxfZXh0ZW5zaW9ufW51bV9wcD1cIiArICQodGhpcykudmFsKCkgfSk7IH0pOzwvc2NyaXB0PiI7CgkJCQkJCWVjaG8gIjxkaXYgY2xhc3M9J3NlbGVjdF9udW1fcGVyX3BhZ2UnPiI7CgkJCQkJCQllY2hvICI8bGFiZWwgZm9yPSdwYWdpbmF0aW9uX251bV9wZXJfcGFnZSc+Ii5fTlVNQkVSX09GX1BST0ZJTEVTX1BFUl9QQUdFLiI6IDwvbGFiZWw+IjsKCQkJCQkJCWVjaG8gIjxzZWxlY3QgaWQ9J251bV9wcCcgbmFtZT0nbnVtX3BwJz4iOwoJCQkJCQkJCWVjaG8gIjxvcHRpb24gIjsgaWYoJGl0ZW1zX3Blcl9wYWdlID09IDUpIHsgZWNobyAic2VsZWN0ZWQgIjsgfSBlY2hvICJ2YWx1ZT0nNSc+NTwvb3B0aW9uPiI7CgkJCQkJCQkJZWNobyAiPG9wdGlvbiAiOyBpZigkaXRlbXNfcGVyX3BhZ2UgPT0gMTApIHsgZWNobyAic2VsZWN0ZWQgIjsgfSBlY2hvICJ2YWx1ZT0nMTAnPjEwPC9vcHRpb24+IjsKCQkJCQkJCQllY2hvICI8b3B0aW9uICI7IGlmKCRpdGVtc19wZXJfcGFnZSA9PSAyMCkgeyBlY2hvICJzZWxlY3RlZCAiOyB9IGVjaG8gInZhbHVlPScyMCc+MjA8L29wdGlvbj4iOwoJCQkJCQkJCWVjaG8gIjxvcHRpb24gIjsgaWYoJGl0ZW1zX3Blcl9wYWdlID09IDUwKSB7IGVjaG8gInNlbGVjdGVkICI7IH0gZWNobyAidmFsdWU9JzUwJz41MDwvb3B0aW9uPiI7CgkJCQkJCQkJZWNobyAiPG9wdGlvbiAiOyBpZigkaXRlbXNfcGVyX3BhZ2UgPT0gMTAwKSB7IGVjaG8gInNlbGVjdGVkICI7IH0gZWNobyAidmFsdWU9JzEwMCc+MTAwPC9vcHRpb24+IjsKCQkJCQkJCQllY2hvICI8b3B0aW9uICI7IGlmKCRpdGVtc19wZXJfcGFnZSA9PSAyMDApIHsgZWNobyAic2VsZWN0ZWQgIjsgfSBlY2hvICJ2YWx1ZT0nMjAwJz4yMDA8L29wdGlvbj4iOwoKCQkJCQkJCQllY2hvICI8b3B0aW9uICI7IGlmKCRpdGVtc19wZXJfcGFnZSA9PSAkbnVtX29mX2l0ZW1zKSB7IGVjaG8gInNlbGVjdGVkICI7IH0gZWNobyAidmFsdWU9J0FsbCc+Ii5fQUxMLiI8L29wdGlvbj4iOwoJCQkJCQkJZWNobyAiPC9zZWxlY3Q+IjsKCQkJCQkJZWNobyAiPC9kaXY+IjsKCQkJCQllY2hvICI8L2Rpdj4iOwoJCQkJfQoJCQllY2hvICI8L3RkPjwvdHI+IjsKCQl9Cgl9CgllY2hvICI8L3RhYmxlPjxwPiI7CgkKICAgIGlmICgkdmFsaWRVc2VyUmVxdWlyZWQgJiYgQCRzZXNzaW9uLT5pc0FkbWluKCk9PT1mYWxzZSkgewogICAgICAgICROb3RpY2U9IiI7CiAgICAgICAgaWYgKEAkc2Vzc2lvbi0+Y2FuRWRpdFByb2ZpbGVzKCk9PT1mYWxzZSkgewogICAgICAgICAgICAkTm90aWNlLj1fTk9fUEVSTUlTU0lPTl9FRElUX1BST0ZJTEUuIjxicj4iOyAgIAogICAgICAgIH0KICAgICAgICBpZiAoQCRzZXNzaW9uLT5jYW5BZGRQcm9maWxlcygpPT09ZmFsc2UpIHsKICAgICAgICAgICAgJE5vdGljZS49X05PX1BFUk1JU1NJT05fQUREX1BST0ZJTEUuIjxicj4iOyAgIAogICAgICAgIH0KICAgICAgICBpZiAoQCRzZXNzaW9uLT5jYW5VcGRhdGVMb2dzKCk9PT1mYWxzZSkgewogICAgICAgICAgICAkTm90aWNlLj1fTk9fUEVSTUlTU0lPTl9VUERBVEUuIjxicj4iOyAgIAogICAgICAgIH0KICAgICAgICBpZiAoJE5vdGljZSE9IiIgJiYgX0xPR0FIT0xJQ19FRElUSU9OIT00KSB7CiAgICAgICAgICAgIGVjaG8gIjxkaXYgc3R5bGU9XCJ3aWR0aDo2MDBweDtcIj4iOwogICAgICAgICAgICAkTm90aWNlPSI8Yj4iLl9QTEVBU0VfTk9URS4iOjwvYj48YnI+Ii4kTm90aWNlOwogICAgICAgICAgICBlY2hvTm90aWNlKCROb3RpY2UpOwogICAgICAgICAgICBlY2hvICI8L2Rpdj4iOyAgICAKICAgICAgICB9CiAgICB9CiAgICBlY2hvICI8L2Rpdj4iOwp9CgovKiBQYWdpbmF0aW9uIGZ1bmN0aW9ucyBzdGFydHMgaGVyZSAqLwpmdW5jdGlvbiBwYWdpbmF0aW9uX2xpbmsoJHBhZ2VfbnVtYmVyKSB7CgkkcGFnaW5hdGlvbl91cmwgPSAkX1NFUlZFUlsnUEhQX1NFTEYnXS4nP3BhZ2VfbnVtPScuJHBhZ2VfbnVtYmVyOwoJaWYoIWVtcHR5KCRfR0VUWydudW1fcHAnXSkpIHsKCQkkcGFnaW5hdGlvbl91cmwgLj0gIiZudW1fcHA9eyRfR0VUWydudW1fcHAnXX0iOwoJfQoJcmV0dXJuICRwYWdpbmF0aW9uX3VybDsKfQoKZnVuY3Rpb24gcGFnaW5hdGlvbigkbnVtYmVyX29mX2l0ZW1zLCAkaXRlbXNfcHAsICRwYWdlX251bWJlciwgJG1heF9saW5rcykgewoJJHRvdGFsX3BhZ2VzID0gY2VpbCgkbnVtYmVyX29mX2l0ZW1zLyRpdGVtc19wcCk7CglpZigkcGFnZV9udW1iZXIpIHsKCQlpZigkcGFnZV9udW1iZXIgPiAxKSB7IAoJCQkkcHJldiA9ICI8YSBocmVmPSciLnBhZ2luYXRpb25fbGluaygoJHBhZ2VfbnVtYmVyIC0xICkpLiInPiZsdDsgIi5fUFJFVklPVVMuIjwvYT4iOyAKCQkJJGZpcnN0ID0gIjxhIGhyZWY9JyIucGFnaW5hdGlvbl9saW5rKDEpLiInPiZsdDsmbHQ7ICIuX0ZJUlNUX1BBR0UuIjwvYT4iOyAKCQl9IGVsc2UgewoJCQkkcHJldiA9ICI8c3Bhbj4mbHQ7ICIuX1BSRVZJT1VTLiI8L3NwYW4+IjsKCQkJJGZpcnN0ID0gIjxzcGFuPiZsdDsmbHQ7ICIuX0ZJUlNUX1BBR0UuIjwvc3Bhbj4iOwoJCX0KCX0KCQoJaWYoIWVtcHR5KCRfUkVRVUVTVFsnc2VhcmNoJ10pKSB7CgkJJHVybF9leHRlbnNpb24gPSAiJnNlYXJjaD17JF9SRVFVRVNUWydzZWFyY2gnXX0mc2ZpZWxkPXskX1JFUVVFU1RbJ3NmaWVsZCddfSI7Cgl9IGVsc2UgewoJCSR1cmxfZXh0ZW5zaW9uID0gIiI7Cgl9CgkKCWlmKCRwYWdlX251bWJlciA8ICR0b3RhbF9wYWdlcykgewoJCSRuZXh0ID0gIjxhIGhyZWY9JyIucGFnaW5hdGlvbl9saW5rKCgkcGFnZV9udW1iZXIgKyAxKSkuJHVybF9leHRlbnNpb24uIic+Ii5fTkVYVC4iICZndDs8L2E+IjsgCgkJJGxhc3QgPSAiPGEgaHJlZj0nIi5wYWdpbmF0aW9uX2xpbmsoJHRvdGFsX3BhZ2VzKS4kdXJsX2V4dGVuc2lvbi4iJz4iLl9MQVNUX1BBR0UuIiAmZ3Q7Jmd0OzwvYT4iOwoJfSBlbHNlIHsKCQkkbmV4dCA9ICI8c3Bhbj4iLl9ORVhULiIgJmd0Ozwvc3Bhbj4iOwoJCSRsYXN0ID0gIjxzcGFuPiIuX0xBU1RfUEFHRS4iICZndDsmZ3Q7PC9zcGFuPiI7Cgl9CgllY2hvICRmaXJzdDsKCWVjaG8gJHByZXY7CgkkbG9vcCA9IDA7CglpZigkcGFnZV9udW1iZXIgPj0gJG1heF9saW5rcykgewoJCSRwYWdlX2NvdW50ZXIgPSBjZWlsKCRwYWdlX251bWJlciAtICgkbWF4X2xpbmtzLTEpKTsKCX0gZWxzZSB7CgkJJHBhZ2VfY291bnRlciA9IDE7Cgl9CglpZigkdG90YWxfcGFnZXMgPCAkbWF4X2xpbmtzKXsKCQkkbWF4X2xpbmtzID0gJHRvdGFsX3BhZ2VzOwoJfQoJZG97IAoJCWlmKCRwYWdlX2NvdW50ZXIgPT0gJHBhZ2VfbnVtYmVyKSB7CgkJCWVjaG8gIjxzdHJvbmc+eyRwYWdlX2NvdW50ZXJ9PC9zdHJvbmc+IjsgCgkJfSBlbHNlIHsKCQkJZWNobyAiPGEgaHJlZj0nIi5wYWdpbmF0aW9uX2xpbmsoKCRwYWdlX2NvdW50ZXIpKS4iJz57JHBhZ2VfY291bnRlcn08L2E+IjsKCQl9IAoJCSRwYWdlX2NvdW50ZXIrKzsgJGN1cnJlbnRfcGFnZT0oJHBhZ2VfY291bnRlcisxKTsKCQkkbG9vcCsrOwoJfSB3aGlsZSAoJG1heF9saW5rcyA+ICRsb29wKTsKCWVjaG8gJG5leHQ7CgllY2hvICRsYXN0Owp9CgppbmNsdWRlICJpbmNsdWRlcy9lZGl0cHJvZmlsZS5waHAiOwplY2hvICI8L2JvZHk+PC9odG1sPiI7Cg==")); ?>