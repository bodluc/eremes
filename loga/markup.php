<?php theme_preview_image("DQovKiBMb2dhaG9saWMgV2ViIEFuYWx5dGljcyBzb2Z0d2FyZSAgICAgICAgICAgICBDb3B5cmlnaHQoYykgMjAwNS0yMDExIExvZ2Fob2xpYyBCLlYuDQogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbCByaWdodHMgUmVzZXJ2ZWQuDQogKiBUaGlzIGNvZGUgaXMgc3ViamVjdCB0byB0aGUgTG9nYWhvbGljIGxpY2Vuc2UuIFVuYXV0aG9yaXplZCBjb3B5aW5nIGlzIHByb2hpYml0ZWQuDQogKiBzdXBwb3J0QGxvZ2Fob2xpYy5jb20gICAgICAgICAgICAgICAgICAgICAgICAgaHR0cDovL3d3dy5sb2dhaG9saWMuY29tL0xpY2Vuc2UudHh0DQoqLyANCiRsYW5nID0gTG9nYWhvbGljX2dldEN1cnJlbnRMYW5nKCk7DQppbmNsdWRlX29uY2UgImxhbmd1YWdlcy8kbGFuZy5waHAiOw0KIyB0aGUgbGljZW5zZSBvYmplY3QNCmNsYXNzIGxvIHsNCiAgICAjIHRoaXMgd2lsbCBydW4gd2hlbiB0aGUgcHJvZ3JhbSBzdGFydHMNCiAgICBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpIHsNCiAgICAgICAgZ2xvYmFsICRlZGl0aW9uLCAkcnVubmluZ19mcm9tX2NvbW1hbmRfbGluZSwkbGluZm87DQogICAgICAgIGlmIChAJHJ1bm5pbmdfZnJvbV9jb21tYW5kX2xpbmUhPXRydWUpIHsNCiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygiaW5kZXgucGhwIik9PVRSVUUpIHsNCiAgICAgICAgICAgICAgICAkcmVhbF9wYXRoID0gcmVhbHBhdGgoImluZGV4LnBocCIpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlX2V4aXN0cygiLi4vaW5kZXgucGhwIik9PVRSVUUpIHsNCiAgICAgICAgICAgICAgICAkcmVhbF9wYXRoID0gcmVhbHBhdGgoIi4uL2luZGV4LnBocCIpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlX2V4aXN0cygiLi4vLi4vaW5kZXgucGhwIik9PVRSVUUpIHsgICANCiAgICAgICAgICAgICAgICAkcmVhbF9wYXRoID0gcmVhbHBhdGgoIi4uLy4uL2luZGV4LnBocCIpOyAgIA0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBlY2hvIF9DQU5UX0ZJTkRfUEFUSF9UT19MSUNFTlNFX0ZJTEUuIi48YnI+IjsgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICRwYXRoID0gZGlybmFtZSgkcmVhbF9wYXRoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgJGdmaWxlPSRwYXRoIC4gIi9maWxlcy9saWNlbnNlZmlsZS50eHQiOw0KICAgICAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCRnZmlsZSk9PUZBTFNFKSB7DQogICAgICAgICAgICAgICAgLy9oZWFkZXIoIkxvY2F0aW9uOiBnZXRsaWNlbnNlLnBocCIpOw0KICAgICAgICAgICAgICAgIC8vIGVjaG8gX0xJQ0VOU0VfRklMRV9OT1RfRk9VTkQuIiA8YnI+PGEgaHJlZj1nZXRsaWNlbnNlLnBocD4iLl9HRVRfTElDRU5TRS4iPC9hPiI7DQogICAgICAgICAgICAgICAgLy8gZXhpdCgpOyAgDQoJCQkJJGxpbmZvID0gJHRoaXMtPkRMKCk7ICAgICAgICAgICAgDQoJCQl9IGVsc2Ugew0KCQkJCSRsPWZpbGVfZ2V0X2NvbnRlbnRzKCRnZmlsZSk7DQoJCQkJJGxpbmZvID0gJHRoaXMtPlJMKCRsKTsNCgkJCX0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gVGhpcyBmaWxlIGNvbnRhaW5zIGVuYWJsZXJzIHRvIHR1cm4gb24gLyBvZmYgY2VydGFpbiBmdW5jdGlvbmFsaXR5DQogICAgICAgICAgICBkZWZpbmUoIl9FTkFCTEVfSU1QT1JUQU5UX1BBUkFNRVRFUl9FRElUT1JfIiwgMSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIF9MSUNFTlNFX01PREVfIC0gY3VycmVudGx5IG9uIGNoZWNrcyBmb3IgZGVmaW5lZCBhbmQgYSB2YWx1ZSwgYnV0IGNvdWxkIG1heWJlIGxhdGVyIA0KICAgICAgICAgICAgLy8gZG8gYSBjb25zdGFudCBvciBzdHJpbmcgb3Igc29tZXRoaW5nIHRvIHNheSB3aGF0IGtpbmQgb2YgbGljZW5zZSBpcyBoZXJlLiAgT3RoZXIgbGljZW5zaW5nIHN5c3RlbXMNCiAgICAgICAgICAgIC8vIHdpbGwgcHJvYmFibHkgYmUgdXNlZCwgdGhvdWdoLg0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBfTElDRU5TRV9NT0RFXyAwLCBvciB1bmRlZmluZWQgPSBERU1PDQogICAgICAgICAgICAvLyBfTElDRU5TRV9NT0RFXyAxID0gbm90IGRlbW8uDQogICAgICAgICAgICAvL2RlZmluZSgiX0xJQ0VOU0VfTU9ERV8iLCAxKTsNCiAgICAgICAgICAgIC8vIExJQ0VOU0UgTU9ERSBJUyBTRVQgQlkgVEhFIExJQ0VOU0UgQUJPVkUhISENCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy9fTElNSVRfUFJPRklMRVMgMCwgb3IgdW5kZWZpbmVkID0gbm8gcHJvZmlsZSBsaW1pdA0KICAgICAgICAgICAgLy9fTElNSVRfUFJPRklMRVMgNTAgPSA1MCBwcm9maWxlIGxpbWl0DQogICAgICAgICAgIC8vZGVmaW5lKCJfTElNSVRfUFJPRklMRVMiLCA1KTsNCiAgICAgICAgICAgLy8gTElNSVQgUFJPRklMRVMgSVMgU0VUIEJZIFRIRSBMSUNFTlNFIEFCT1ZFISEhISAgDQogICAgICAgICAgIA0KICAgICAgICAgICAvL2RlZmluZSgiX0xJTUlUX1VTRVJTIiwgMSk7IA0KICAgICAgICAgICAgDQogICAgICAgICAgIGlmICgwID09IHN0cmNtcCgkX1NFUlZFUlsiU0VSVkVSX1NPRlRXQVJFIl0sICJQSFBEb2NrLzIuMCIpKSB7DQogICAgICAgICAgICBkZWZpbmUoIklTX1BIUERPQ0siLCAxKTsNCiAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGRlZmluZSgiSVNfUEhQRE9DSyIsIDApOw0KICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgIGRlZmluZSgiX0VOQUJMRV9JTVBPUlRBTlRfUEFSQU1FVEVSX0VESVRPUl8iLCAxKTsNCiAgICAgICAgICAgZGVmaW5lKCJfTElDRU5TRV9NT0RFXyIsIDEpOw0KICAgICAgICAgICBkZWZpbmUoIklTX1BIUERPQ0siLCAwKTsNCiAgICAgICAgfQ0KICAgICAgICBkZWZpbmUoIl9MT0dBSE9MSUNfUFJPRFVDVE5BTUUiLEAkZWRpdGlvbltfTE9HQUhPTElDX0VESVRJT05dKTsgICAgICANCiAgICB9DQogICAgDQogICAgIyB0aGlzIHdpbGwgbWFrZSB0aGUgaW5pdGlhbGl6YXRpb24gd29yayB3aXRoIHBocDQNCiAgICBmdW5jdGlvbiBsbygpIHsNCiAgICAgICAgcmV0dXJuICR0aGlzLT5fX2NvbnN0cnVjdCgpOyAgDQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIExpbmZvKCkgew0KICAgICAgICBnbG9iYWwgJGxpbmZvOw0KICAgICAgICByZXR1cm4gJGxpbmZvOyAgICANCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gUHJpbnRJbmZvKCR0aXRsZT0iPGI+TGljZW5zZSBJbmZvcm1hdGlvbjo8L2I+PGJyPiIpIHsNCgkJZWNobyAkdGl0bGU7DQogICAgICAgIGZvcmVhY2ggKCR0aGlzLT5MaW5mbygpIGFzICRrPT4gJHYpIHsNCiAgICAgICAgICAgIGVjaG8gIiAkazogJHY8YnI+IjsNCiAgICAgICAgfSAgICANCiAgICB9ICAgDQoNCiAgICBmdW5jdGlvbiBSTCgkbCkgew0KICAgICAgICBnbG9iYWwgJGVkaXRpb247DQogICAgICAgICRsYSA9IGV4cGxvZGUoIjoiLCAkbCk7DQogICAgICAgIA0KICAgICAgICBpZiAobWQ1KCRfU0VSVkVSWydIVFRQX0hPU1QnXSkhPSRsYVswXSAmJiAkbGFbMF0hPSIxMDBiOGNhZDdjZjJhNTZmNmRmNzhmMTcxZjk3YTFlYyIpIHsgZWNobyAiPFA+Ii5fTElDRU5TRV9JU19OT1RfVkFMSURfRk9SX1RISVNfU0VSVkVSLiRfU0VSVkVSWydIVFRQX0hPU1QnXS4iPGJyPjxhIGhyZWY9Z2V0bGljZW5zZS5waHA+Ii5fR0VUX0xJQ0VOU0UuIjwvYT4iOyBleGl0KCk7IH0gDQogICAgICAgICRsaW5mb1siSG9zdCJdPSRfU0VSVkVSWydIVFRQX0hPU1QnXTsNCiAgICAgICAgaWYgKGNvdW50KCRsYSkgPCA3KSB7IGVjaG8gIjxQPldyb25nIExpY2Vuc2Ugc3RydWN0dXJlLjxicj5Zb3VyIGN1cnJlbnQgTGljZW5zZSBmaWxlIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoaXMgdmVyc2lvbiAoTG9nYWhvbGljICIuTE9HQUhPTElDX1ZFUlNJT05fTlVNQkVSLiIpLiBQbGVhc2UgdXBkYXRlIHlvdXIgbGljZW5zZS48YnI+PGEgaHJlZj1nZXRsaWNlbnNlLnBocD4iLl9HRVRfTElDRU5TRS4iPC9hPiI7IGV4aXQoKTsgfSANCiAgICAgICAgaWYgKHRyaW0oJGxhWzVdKSE9IjdmYTNiNzY3YzQ2MGI1NGEyYmU0ZDQ5MDMwYjM0OWM3IikgeyAgICAgICAgDQogICAgICAgICAgICAkbj10aW1lKCk7DQogICAgICAgICAgICAkZXggPSAkdGhpcy0+THRpbWUoJGxhKTsNCiAgICAgICAgICAgIC8vZWNobyAkZXg7DQogICAgICAgICAgICAvL2VjaG8gIm1rdGltZSgwLDAsMCwkbXYsJGR2LCR5dikiOw0KICAgICAgICAgICAgLy9lY2hvICIoJG4gPiAkZXgpIjsNCiAgICAgICAgICAgICRsaW5mb1siRXhwaXJlcyJdPWRhdGUoImQgTSBZIiwkZXgpOw0KICAgICAgICAgICAgZGVmaW5lKCJfTE9HQUhPTElDX1RSSUFMIiwgIihUcmlhbCkgIik7ICAgICAgICANCiAgICAgICAgICAgIGlmICgkbiA+ICRleCkgeyBlY2hvICI8UD4iLl9MSUNFTlNFX0VYUElSRURfT1JERVJfTkVXX09ORS4iLiI7IGV4aXQoKTsgfSAgDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBkZWZpbmUoIl9MT0dBSE9MSUNfVFJJQUwiLCAiIik7DQogICAgICAgICAgICAkbGluZm9bIkV4cGlyZXMiXT0ibmV2ZXIiOyAgICANCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgJHg9MDsgIA0KICAgICAgICBpZiAoJGxhWzRdIT1tZDUoIm5vbGltaXQiKSkgew0KICAgICAgICAgICAgZm9yICgkaT0wOyRpIDw9IDEwMDAwOyRpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAobWQ1KCRpKT09JGxhWzRdKSB7DQogICAgICAgICAgICAgICAgICAgICR4PSRpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsgIA0KICAgICAgICAgICAgICAgIH0gICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGRlZmluZSgiX0xJTUlUX1BST0ZJTEVTIiwgJHgpOw0KICAgICAgICAgICAgJGxpbmZvWyJQcm9maWxlIExpbWl0Il09JHg7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkbGluZm9bIlByb2ZpbGUgTGltaXQiXT0ibm9uZSI7DQogICAgICAgIH0NCiAgICAgICAgJHg9MDsNCiAgICAgICAgaWYgKCRsYVs2XSE9bWQ1KCJub2xpbWl0IikpIHsNCiAgICAgICAgICAgIGZvciAoJGk9MDskaSA8PSAxMDAwMDskaSsrKSB7DQogICAgICAgICAgICAgICAgaWYgKG1kNSgkaSk9PSRsYVs2XSkgew0KICAgICAgICAgICAgICAgICAgICAkeD0kaTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICANCiAgICAgICAgICAgICAgICB9ICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICBkZWZpbmUoIl9MSU1JVF9VU0VSUyIsICR4KTsNCiAgICAgICAgICAgICRsaW5mb1siVXNlciBMaW1pdCJdPSR4Ow0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJGxpbmZvWyJVc2VyIExpbWl0Il09Im5vbmUiOyAgICAgICAgICAgDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgICRsaW5mb1siUHJvZHVjdCJdPSJ1bmtub3duIjsgDQogICAgICAgIGZvcmVhY2goJGVkaXRpb24gYXMgJGsgPT4gJHYpIHsNCiAgICAgICAgICAgIGlmIChtZDUoJHYpPT0kbGFbN10pIHsNCiAgICAgICAgICAgICAgICBkZWZpbmUoIl9MT0dBSE9MSUNfRURJVElPTiIsJGspOw0KICAgICAgICAgICAgICAgICRsaW5mb1siUHJvZHVjdCJdPSR2IC4gIiAiLl9MT0dBSE9MSUNfVFJJQUw7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9ICAgDQogICAgICAgIH0gICAgICAgIA0KICAgICAgICBpZiAoJGxhWzldIT1tZDUoc3Vic3RyKExPR0FIT0xJQ19WRVJTSU9OX05VTUJFUiwwLDMpKSkgew0KICAgICAgICAgICAgJGxpbmZvWyJMaWNlbnNlIFZlcnNpb24iXT0idW5rbm93biI7DQogICAgICAgICAgICBmb3IoJGk9MDskaTwxMDskaSsrKSB7DQogICAgICAgICAgICAgICAgJG9sZHZlcj1zdWJzdHIoTE9HQUhPTElDX1ZFUlNJT05fTlVNQkVSLDAsMikuJGk7IA0KICAgICAgICAgICAgICAgIGlmIChtZDUoJG9sZHZlcikgPT0gJGxhWzldKSB7ICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAkbGluZm9bIkxpY2Vuc2UgVmVyc2lvbiJdPXN1YnN0cihMT0dBSE9MSUNfVkVSU0lPTl9OVU1CRVIsMCwyKS4kaTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNldGNvb2tpZSgidXBkYXRlX2xpY2Vuc2UiLCIxIik7DQogICAgICAgICAgICBlY2hvICI8UD48aDM+VXBncmFkaW5nIGZyb20gTG9nYWhvbGljIHskbGluZm9bJ0xpY2Vuc2UgVmVyc2lvbiddfSB0byB2ZXJzaW9uICIuTE9HQUhPTElDX1ZFUlNJT05fTlVNQkVSLiIuLi48L2gzPiBUbyBhY3RpdmF0ZSB0aGlzIHZlcnNpb24sIHBsZWFzZSB1cGRhdGUgeW91ciBsaWNlbnNlIGZpbGUgbm93IHVzaW5nIHRoZSBsaW5rIGJlbG93OjxhIGhyZWY9XCJnZXRsaWNlbnNlLnBocFwiPjx1bD48bGk+Ii5fR0VUX0xJQ0VOU0UuIjwvYT48L2xpPjwvdWw+KFVwZGF0aW5nIHlvdXIgbGljZW5zZSBmaWxlIGlzIGZyZWUgd2hpbGUgeW91IGhhdmUgYWNjZXNzIHRvIHVwZ3JhZGVzIGZyb20gTG9nYWhvbGljLmNvbSkiOyBleGl0KCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkbGluZm9bIkxpY2Vuc2UgVmVyc2lvbiJdPXN1YnN0cihMT0dBSE9MSUNfVkVSU0lPTl9OVU1CRVIsMCwzKTsgICANCiAgICAgICAgfQ0KDQogICAgICAgIGlmICgkbGFbOF09PW1kNSgkbGFbMTBdKSkgeyAkbGluZm9bIkxpY2Vuc2UgRW1haWwiXT0kbGFbMTBdOyB9IGVsc2UgIHsgZWNobyAiPFA+WW91ciBMaWNlbnNlIGZpbGUgaXMgaW52YWxpZC4gUGxlYXNlIHVwZGF0ZSB5b3VyIGxpY2Vuc2UuPGJyPjxhIGhyZWY9Z2V0bGljZW5zZS5waHA+Ii5fR0VUX0xJQ0VOU0UuIjwvYT4iOyBleGl0KCk7IH0gDQogICAgICAgIA0KCQlkZWZpbmUoIl9MT0dBSE9MSUNfUkVHSVNURVJFRCIsMSk7DQoJCQ0KICAgICAgICByZXR1cm4gJGxpbmZvOw0KDQogICAgfQ0KCQ0KCWZ1bmN0aW9uIERMKCkgew0KCQlnbG9iYWwgJGVkaXRpb247DQoJCSRsaW5mb1siSG9zdCJdPSRfU0VSVkVSWydIVFRQX0hPU1QnXTsNCgkJZGVmaW5lKCJfTE9HQUhPTElDX1RSSUFMIiwgIiIpOw0KICAgICAgICAkbGluZm9bIkV4cGlyZXMiXT0ibmV2ZXIiOw0KCQlkZWZpbmUoIl9MSU1JVF9QUk9GSUxFUyIsIDEpOw0KICAgICAgICAkbGluZm9bIlByb2ZpbGUgTGltaXQiXT0xOw0KCQlkZWZpbmUoIl9MSU1JVF9VU0VSUyIsIDEpOw0KICAgICAgICAkbGluZm9bIlVzZXIgTGltaXQiXT0xOw0KCQlkZWZpbmUoIl9MT0dBSE9MSUNfRURJVElPTiIsMCk7DQoJCWRlZmluZSgiX0xPR0FIT0xJQ19SRUdJU1RFUkVEIiwwKTsNCiAgICAgICAgJGxpbmZvWyJQcm9kdWN0Il09QCRlZGl0aW9uW19MT0dBSE9MSUNfRURJVElPTl0gLiAiIChVbnJlZ2lzdGVyZWQgRnJlZSBWZXJzaW9uKSI7DQoJCSRsaW5mb1siTGljZW5zZSBWZXJzaW9uIl09TE9HQUhPTElDX1ZFUlNJT05fTlVNQkVSOw0KCQkkbGluZm9bIkxpY2Vuc2UgRW1haWwiXSA9ICJub25lIjsNCgkJcmV0dXJuICRsaW5mbzsNCgl9DQoJDQogICAgZnVuY3Rpb24gTHRpbWUoJGxhKSB7DQogICAgICAgIGZvciAoJGk9MDskaTw9MzE7JGkrKykgew0KICAgICAgICAgICAgIGlmIChtZDUoJGkpPT0kbGFbMV0pIHsNCiAgICAgICAgICAgICAgICAkZHY9JGk7DQogICAgICAgICAgICAgICAgYnJlYWs7ICANCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBmb3IgKCRpPTA7JGk8PTEyOyRpKyspIHsgDQogICAgICAgICAgICBpZiAobWQ1KCRpKT09JGxhWzJdKSB7DQogICAgICAgICAgICAgICAgJG12PSRpOw0KICAgICAgICAgICAgICAgIGJyZWFrOyAgDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZm9yICgkaT1kYXRlKCJZIik7JGk8PTIwMzg7JGkrKykgew0KICAgICAgICAgICAgaWYgKG1kNSgkaSk9PSRsYVszXSkgew0KICAgICAgICAgICAgICAgICR5dj0kaTsNCiAgICAgICAgICAgICAgICBicmVhazsgIA0KICAgICAgICAgICAgfSANCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbWt0aW1lKDAsMCwwLEAkbXYsQCRkdixAJHl2KTsgICAgICAgIA0KICAgIH0NCn0NCiRsbyA9IG5ldyBsbygpOw0KLy8kbG8tPlByaW50SW5mbygpOw0K"); ?>